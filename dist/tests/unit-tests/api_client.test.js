"use strict";
// Copyright (c) 2023 Apple Inc. Licensed under MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
const AccountTenure_1 = require("../../models/AccountTenure");
const ConsumptionStatus_1 = require("../../models/ConsumptionStatus");
const DeliveryStatus_1 = require("../../models/DeliveryStatus");
const Environment_1 = require("../../models/Environment");
const LifetimeDollarsPurchased_1 = require("../../models/LifetimeDollarsPurchased");
const LifetimeDollarsRefunded_1 = require("../../models/LifetimeDollarsRefunded");
const NotificationTypeV2_1 = require("../../models/NotificationTypeV2");
const Platform_1 = require("../../models/Platform");
const PlayTime_1 = require("../../models/PlayTime");
const Status_1 = require("../../models/Status");
const Subtype_1 = require("../../models/Subtype");
const UserStatus_1 = require("../../models/UserStatus");
const util_1 = require("../util");
const InAppOwnershipType_1 = require("../../models/InAppOwnershipType");
const RefundPreference_1 = require("../../models/RefundPreference");
const index_1 = require("../../index");
const node_fetch_1 = require("node-fetch");
const jsonwebtoken = require("jsonwebtoken");
class AppStoreServerAPIClientForTest extends index_1.AppStoreServerAPIClient {
    constructor(signingKey, keyId, issuerId, bundleId, environment, callback, body, statusCode) {
        super(signingKey, keyId, issuerId, bundleId, environment);
        this.callback = callback;
        this.body = body;
        this.statusCode = statusCode;
    }
    async makeFetchRequest(path, parsedQueryParameters, method, stringBody, headers) {
        expect(headers['Content-Type']).toBe(typeof stringBody !== 'undefined' ? 'application/json' : undefined);
        expect('application/json').toBe(headers['Accept']);
        expect(headers['Authorization']).toMatch(/^Bearer .+/);
        const token = headers['Authorization'].substring(7);
        const decodedToken = jsonwebtoken.decode(token);
        expect(decodedToken['bid']).toBe('bundleId');
        expect(decodedToken['aud']).toBe('appstoreconnect-v1');
        expect(decodedToken['iss']).toBe('issuerId');
        expect(headers['User-Agent']).toMatch(/^app-store-server-library\/node\/.+/);
        this.callback(path, parsedQueryParameters, method, stringBody, headers);
        return Promise.resolve(new node_fetch_1.Response(this.body, {
            status: this.statusCode
        }));
    }
}
function getClientWithBody(path, callback, statusCode = 200) {
    const body = (0, util_1.readFile)(path);
    return getAppStoreServerAPIClient(body, statusCode, callback);
}
function getAppStoreServerAPIClient(body, statusCode, callback) {
    const key = getSigningKey();
    return new AppStoreServerAPIClientForTest(key, "keyId", "issuerId", "bundleId", Environment_1.Environment.LOCAL_TESTING, callback, body, statusCode);
}
function getSigningKey() {
    return (0, util_1.readFile)('tests/resources/certs/testSigningKey.p8');
}
describe('The api client ', () => {
    it('calls extendRenewalDateForAllActiveSubscribers', async () => {
        const client = getClientWithBody("tests/resources/models/extendRenewalDateForAllActiveSubscribersResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("POST").toBe(method);
            expect("/inApps/v1/subscriptions/extend/mass").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeTruthy();
            const body = JSON.parse(stringBody);
            expect(45).toBe(body.extendByDays);
            expect(1).toBe(body.extendReasonCode);
            expect("fdf964a4-233b-486c-aac1-97d8d52688ac").toBe(body.requestIdentifier);
            expect(["USA", "MEX"]).toStrictEqual(body.storefrontCountryCodes);
            expect("com.example.productId").toBe(body.productId);
        });
        const extendRenewalDateRequest = {
            extendByDays: 45,
            extendReasonCode: index_1.ExtendReasonCode.CUSTOMER_SATISFACTION,
            requestIdentifier: "fdf964a4-233b-486c-aac1-97d8d52688ac",
            storefrontCountryCodes: ["USA", "MEX"],
            productId: "com.example.productId"
        };
        const massExtendRenewalDateResponse = await client.extendRenewalDateForAllActiveSubscribers(extendRenewalDateRequest);
        expect(massExtendRenewalDateResponse).toBeTruthy();
        expect("758883e8-151b-47b7-abd0-60c4d804c2f5").toBe(massExtendRenewalDateResponse.requestIdentifier);
    });
    it('calls extendSubscriptionRenewalDate', async () => {
        const client = getClientWithBody("tests/resources/models/extendSubscriptionRenewalDateResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("PUT").toBe(method);
            expect("/inApps/v1/subscriptions/extend/4124214").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeTruthy();
            const body = JSON.parse(stringBody);
            expect(45).toBe(body.extendByDays);
            expect(1).toBe(body.extendReasonCode);
            expect("fdf964a4-233b-486c-aac1-97d8d52688ac").toBe(body.requestIdentifier);
        });
        const extendRenewalDateRequest = {
            extendByDays: 45,
            extendReasonCode: index_1.ExtendReasonCode.CUSTOMER_SATISFACTION,
            requestIdentifier: "fdf964a4-233b-486c-aac1-97d8d52688ac"
        };
        const extendRenewalDateResponse = await client.extendSubscriptionRenewalDate("4124214", extendRenewalDateRequest);
        expect(extendRenewalDateResponse).toBeTruthy();
        expect("2312412").toBe(extendRenewalDateResponse.originalTransactionId);
        expect("9993").toBe(extendRenewalDateResponse.webOrderLineItemId);
        expect(extendRenewalDateResponse.success).toBe(true);
        expect(1698148900000).toBe(extendRenewalDateResponse.effectiveDate);
    });
    it('calls getAllSubscriptionStatuses', async () => {
        const client = getClientWithBody("tests/resources/models/getAllSubscriptionStatusesResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/subscriptions/4321").toBe(path);
            expect(["2", "1"]).toStrictEqual(parsedQueryParameters.getAll("status"));
            expect(stringBody).toBeUndefined();
        });
        const statusResponse = await client.getAllSubscriptionStatuses("4321", [Status_1.Status.EXPIRED, Status_1.Status.ACTIVE]);
        expect(statusResponse).toBeTruthy();
        expect(Environment_1.Environment.LOCAL_TESTING).toBe(statusResponse.environment);
        expect("com.example").toBe(statusResponse.bundleId);
        expect(5454545).toBe(statusResponse.appAppleId);
        const item = [
            {
                subscriptionGroupIdentifier: 'sub_group_one',
                lastTransactions: [
                    {
                        status: Status_1.Status.ACTIVE,
                        originalTransactionId: "3749183",
                        signedTransactionInfo: "signed_transaction_one",
                        signedRenewalInfo: "signed_renewal_one"
                    },
                    {
                        status: Status_1.Status.REVOKED,
                        originalTransactionId: "5314314134",
                        signedTransactionInfo: "signed_transaction_two",
                        signedRenewalInfo: "signed_renewal_two"
                    }
                ]
            },
            {
                subscriptionGroupIdentifier: "sub_group_two",
                lastTransactions: [
                    {
                        status: Status_1.Status.EXPIRED,
                        originalTransactionId: "3413453",
                        signedTransactionInfo: "signed_transaction_three",
                        signedRenewalInfo: "signed_renewal_three"
                    }
                ]
            }
        ];
        expect(statusResponse.data).toStrictEqual(item);
    });
    it('calls getRefundHistory', async () => {
        const client = getClientWithBody("tests/resources/models/getRefundHistoryResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v2/refund/lookup/555555").toBe(path);
            expect("revision_input").toBe(parsedQueryParameters.get("revision"));
            expect(stringBody).toBeUndefined();
        });
        const refundHistoryResponse = await client.getRefundHistory("555555", "revision_input");
        expect(refundHistoryResponse).toBeTruthy();
        expect(["signed_transaction_one", "signed_transaction_two"]).toStrictEqual(refundHistoryResponse.signedTransactions);
        expect("revision_output").toBe(refundHistoryResponse.revision);
        expect(refundHistoryResponse.hasMore).toBe(true);
    });
    it('calls getStatusOfSubscriptionRenewalDateExtensions', async () => {
        const client = getClientWithBody("tests/resources/models/getStatusOfSubscriptionRenewalDateExtensionsResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/subscriptions/extend/mass/20fba8a0-2b80-4a7d-a17f-85c1854727f8/com.example.product").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        });
        const massExtendRenewalDateStatusResponse = await client.getStatusOfSubscriptionRenewalDateExtensions("com.example.product", "20fba8a0-2b80-4a7d-a17f-85c1854727f8");
        expect(massExtendRenewalDateStatusResponse).toBeTruthy();
        expect("20fba8a0-2b80-4a7d-a17f-85c1854727f8").toBe(massExtendRenewalDateStatusResponse.requestIdentifier);
        expect(massExtendRenewalDateStatusResponse.complete).toBe(true);
        expect(1698148900000).toBe(massExtendRenewalDateStatusResponse.completeDate);
        expect(30).toBe(massExtendRenewalDateStatusResponse.succeededCount);
        expect(2).toBe(massExtendRenewalDateStatusResponse.failedCount);
    });
    it('calls getTestNotificationStatus', async () => {
        const client = getClientWithBody("tests/resources/models/getTestNotificationStatusResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/notifications/test/8cd2974c-f905-492a-bf9a-b2f47c791d19").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        });
        const checkTestNotificationResponse = await client.getTestNotificationStatus("8cd2974c-f905-492a-bf9a-b2f47c791d19");
        expect(checkTestNotificationResponse).toBeTruthy();
        expect("signed_payload").toBe(checkTestNotificationResponse.signedPayload);
        const sendAttemptItems = [
            {
                attemptDate: 1698148900000,
                sendAttemptResult: index_1.SendAttemptResult.NO_RESPONSE
            },
            {
                attemptDate: 1698148950000,
                sendAttemptResult: index_1.SendAttemptResult.SUCCESS
            }
        ];
        expect(sendAttemptItems).toStrictEqual(checkTestNotificationResponse.sendAttempts);
    });
    it('calls getNotificationHistoryResponse', async () => {
        const client = getClientWithBody("tests/resources/models/getNotificationHistoryResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("POST").toBe(method);
            expect("/inApps/v1/notifications/history").toBe(path);
            expect("a036bc0e-52b8-4bee-82fc-8c24cb6715d6").toBe(parsedQueryParameters.get("paginationToken"));
            expect(stringBody).toBeTruthy();
            const body = JSON.parse(stringBody);
            expect(1698148900000).toBe(body.startDate);
            expect(1698148950000).toBe(body.endDate);
            expect("SUBSCRIBED").toBe(body.notificationType);
            expect("INITIAL_BUY").toBe(body.notificationSubtype);
            expect("999733843").toBe(body.transactionId);
            expect(body.onlyFailures).toBe(true);
        });
        const notificationHistoryRequest = {
            startDate: 1698148900000,
            endDate: 1698148950000,
            notificationType: NotificationTypeV2_1.NotificationTypeV2.SUBSCRIBED,
            notificationSubtype: Subtype_1.Subtype.INITIAL_BUY,
            transactionId: "999733843",
            onlyFailures: true
        };
        const notificationHistoryResponse = await client.getNotificationHistory("a036bc0e-52b8-4bee-82fc-8c24cb6715d6", notificationHistoryRequest);
        expect(notificationHistoryResponse).toBeTruthy();
        expect("57715481-805a-4283-8499-1c19b5d6b20a").toBe(notificationHistoryResponse.paginationToken);
        expect(notificationHistoryResponse.hasMore).toBe(true);
        const expectedNotificationHistory = [
            {
                sendAttempts: [
                    {
                        attemptDate: 1698148900000,
                        sendAttemptResult: index_1.SendAttemptResult.NO_RESPONSE
                    },
                    {
                        attemptDate: 1698148950000,
                        sendAttemptResult: index_1.SendAttemptResult.SUCCESS
                    }
                ],
                signedPayload: "signed_payload_one"
            },
            {
                sendAttempts: [
                    {
                        attemptDate: 1698148800000,
                        sendAttemptResult: index_1.SendAttemptResult.CIRCULAR_REDIRECT
                    }
                ],
                signedPayload: "signed_payload_two"
            }
        ];
        expect(expectedNotificationHistory).toStrictEqual(notificationHistoryResponse.notificationHistory);
    });
    it('calls getTransactionHistory V1', async () => {
        const client = getClientWithBody("tests/resources/models/transactionHistoryResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/history/1234").toBe(path);
            expect("revision_input").toBe(parsedQueryParameters.get("revision"));
            expect("123455").toBe(parsedQueryParameters.get("startDate"));
            expect("123456").toBe(parsedQueryParameters.get("endDate"));
            expect(["com.example.1", "com.example.2"]).toStrictEqual(parsedQueryParameters.getAll("productId"));
            expect(["CONSUMABLE", "AUTO_RENEWABLE"]).toStrictEqual(parsedQueryParameters.getAll("productType"));
            expect("ASCENDING").toBe(parsedQueryParameters.get("sort"));
            expect(["sub_group_id", "sub_group_id_2"]).toStrictEqual(parsedQueryParameters.getAll("subscriptionGroupIdentifier"));
            expect("FAMILY_SHARED").toBe(parsedQueryParameters.get("inAppOwnershipType"));
            expect("false").toBe(parsedQueryParameters.get("revoked"));
            expect(stringBody).toBeUndefined();
        });
        const request = {
            sort: index_1.Order.ASCENDING,
            productTypes: [index_1.ProductType.CONSUMABLE, index_1.ProductType.AUTO_RENEWABLE],
            endDate: 123456,
            startDate: 123455,
            revoked: false,
            inAppOwnershipType: InAppOwnershipType_1.InAppOwnershipType.FAMILY_SHARED,
            productIds: ["com.example.1", "com.example.2"],
            subscriptionGroupIdentifiers: ["sub_group_id", "sub_group_id_2"]
        };
        const historyResponse = await client.getTransactionHistory("1234", "revision_input", request, index_1.GetTransactionHistoryVersion.V1);
        expect(historyResponse).toBeTruthy();
        expect("revision_output").toBe(historyResponse.revision);
        expect(historyResponse.hasMore).toBe(true);
        expect("com.example").toBe(historyResponse.bundleId);
        expect(323232).toBe(historyResponse.appAppleId);
        expect(Environment_1.Environment.LOCAL_TESTING).toBe(historyResponse.environment);
        expect(["signed_transaction_value", "signed_transaction_value2"]).toStrictEqual(historyResponse.signedTransactions);
    });
    it('calls getTransactionHistory V2', async () => {
        const client = getClientWithBody("tests/resources/models/transactionHistoryResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v2/history/1234").toBe(path);
            expect("revision_input").toBe(parsedQueryParameters.get("revision"));
            expect("123455").toBe(parsedQueryParameters.get("startDate"));
            expect("123456").toBe(parsedQueryParameters.get("endDate"));
            expect(["com.example.1", "com.example.2"]).toStrictEqual(parsedQueryParameters.getAll("productId"));
            expect(["CONSUMABLE", "AUTO_RENEWABLE"]).toStrictEqual(parsedQueryParameters.getAll("productType"));
            expect("ASCENDING").toBe(parsedQueryParameters.get("sort"));
            expect(["sub_group_id", "sub_group_id_2"]).toStrictEqual(parsedQueryParameters.getAll("subscriptionGroupIdentifier"));
            expect("FAMILY_SHARED").toBe(parsedQueryParameters.get("inAppOwnershipType"));
            expect("false").toBe(parsedQueryParameters.get("revoked"));
            expect(stringBody).toBeUndefined();
        });
        const request = {
            sort: index_1.Order.ASCENDING,
            productTypes: [index_1.ProductType.CONSUMABLE, index_1.ProductType.AUTO_RENEWABLE],
            endDate: 123456,
            startDate: 123455,
            revoked: false,
            inAppOwnershipType: InAppOwnershipType_1.InAppOwnershipType.FAMILY_SHARED,
            productIds: ["com.example.1", "com.example.2"],
            subscriptionGroupIdentifiers: ["sub_group_id", "sub_group_id_2"]
        };
        const historyResponse = await client.getTransactionHistory("1234", "revision_input", request, index_1.GetTransactionHistoryVersion.V2);
        expect(historyResponse).toBeTruthy();
        expect("revision_output").toBe(historyResponse.revision);
        expect(historyResponse.hasMore).toBe(true);
        expect("com.example").toBe(historyResponse.bundleId);
        expect(323232).toBe(historyResponse.appAppleId);
        expect(Environment_1.Environment.LOCAL_TESTING).toBe(historyResponse.environment);
        expect(["signed_transaction_value", "signed_transaction_value2"]).toStrictEqual(historyResponse.signedTransactions);
    });
    it('calls getTransactionInfo', async () => {
        const client = getClientWithBody("tests/resources/models/transactionInfoResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/transactions/1234").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        });
        const transactionInfoResponse = await client.getTransactionInfo("1234");
        expect(transactionInfoResponse).toBeTruthy();
        expect("signed_transaction_info_value").toBe(transactionInfoResponse.signedTransactionInfo);
    });
    it('calls lookUpOrderId', async () => {
        const client = getClientWithBody("tests/resources/models/lookupOrderIdResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/lookup/W002182").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        });
        const orderLookupResponse = await client.lookUpOrderId("W002182");
        expect(orderLookupResponse).toBeTruthy();
        expect(index_1.OrderLookupStatus.INVALID).toBe(orderLookupResponse.status);
        expect(["signed_transaction_one", "signed_transaction_two"]).toStrictEqual(orderLookupResponse.signedTransactions);
    });
    it('calls requestTestNotification', async () => {
        const client = getClientWithBody("tests/resources/models/requestTestNotificationResponse.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("POST").toBe(method);
            expect("/inApps/v1/notifications/test").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        });
        const sendTestNotificationResponse = await client.requestTestNotification();
        expect(sendTestNotificationResponse).toBeTruthy();
        expect("ce3af791-365e-4c60-841b-1674b43c1609").toBe(sendTestNotificationResponse.testNotificationToken);
    });
    it('calls sendConsumptionData', async () => {
        const client = getAppStoreServerAPIClient("", 200, (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("PUT").toBe(method);
            expect("/inApps/v1/transactions/consumption/49571273").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeTruthy();
            const body = JSON.parse(stringBody);
            expect(body.customerConsented).toBe(true);
            expect(1).toBe(body.consumptionStatus);
            expect(2).toBe(body.platform);
            expect(body.sampleContentProvided).toBe(false);
            expect(3).toBe(body.deliveryStatus);
            expect("7389a31a-fb6d-4569-a2a6-db7d85d84813").toBe(body.appAccountToken);
            expect(4).toBe(body.accountTenure);
            expect(5).toBe(body.playTime);
            expect(6).toBe(body.lifetimeDollarsRefunded);
            expect(7).toBe(body.lifetimeDollarsPurchased);
            expect(4).toBe(body.userStatus);
            expect(3).toBe(body.refundPreference);
        });
        const consumptionRequest = {
            customerConsented: true,
            consumptionStatus: ConsumptionStatus_1.ConsumptionStatus.NOT_CONSUMED,
            platform: Platform_1.Platform.NON_APPLE,
            sampleContentProvided: false,
            deliveryStatus: DeliveryStatus_1.DeliveryStatus.DID_NOT_DELIVER_DUE_TO_SERVER_OUTAGE,
            appAccountToken: "7389a31a-fb6d-4569-a2a6-db7d85d84813",
            accountTenure: AccountTenure_1.AccountTenure.THIRTY_DAYS_TO_NINETY_DAYS,
            playTime: PlayTime_1.PlayTime.ONE_DAY_TO_FOUR_DAYS,
            lifetimeDollarsRefunded: LifetimeDollarsRefunded_1.LifetimeDollarsRefunded.ONE_THOUSAND_DOLLARS_TO_ONE_THOUSAND_NINE_HUNDRED_NINETY_NINE_DOLLARS_AND_NINETY_NINE_CENTS,
            lifetimeDollarsPurchased: LifetimeDollarsPurchased_1.LifetimeDollarsPurchased.TWO_THOUSAND_DOLLARS_OR_GREATER,
            userStatus: UserStatus_1.UserStatus.LIMITED_ACCESS,
            refundPreference: RefundPreference_1.RefundPreference.NO_PREFERENCE
        };
        client.sendConsumptionData("49571273", consumptionRequest);
    });
    it('calls getTransactionInfo but receives a general internal error', async () => {
        const client = getClientWithBody("tests/resources/models/apiException.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/transactions/1234").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        }, 500);
        try {
            const transactionInfoResponse = await client.getTransactionInfo("1234");
            fail('this test call is expected to throw');
        }
        catch (e) {
            let error = e;
            expect(error.httpStatusCode).toBe(500);
            expect(error.apiError).toBe(index_1.APIError.GENERAL_INTERNAL);
            expect(error.errorMessage).toBe("An unknown error occurred.");
        }
    });
    it('calls getTransactionInfo but receives a rate limit exceeded error', async () => {
        const client = getClientWithBody("tests/resources/models/apiTooManyRequestsException.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/transactions/1234").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        }, 429);
        try {
            const transactionInfoResponse = await client.getTransactionInfo("1234");
            fail('this test call is expected to throw');
        }
        catch (e) {
            let error = e;
            expect(error.httpStatusCode).toBe(429);
            expect(error.apiError).toBe(index_1.APIError.RATE_LIMIT_EXCEEDED);
            expect(error.errorMessage).toBe("Rate limit exceeded.");
        }
    });
    it('calls getTransactionInfo but receives an unknown/new error code', async () => {
        const client = getClientWithBody("tests/resources/models/apiUnknownError.json", (path, parsedQueryParameters, method, stringBody, headers) => {
            expect("GET").toBe(method);
            expect("/inApps/v1/transactions/1234").toBe(path);
            expect(parsedQueryParameters.entries.length).toBe(0);
            expect(stringBody).toBeUndefined();
        }, 400);
        try {
            const transactionInfoResponse = await client.getTransactionInfo("1234");
            fail('this test call is expected to throw');
        }
        catch (e) {
            let error = e;
            expect(error.httpStatusCode).toBe(400);
            expect(error.apiError).toBe(9990000);
            expect(error.errorMessage).toBe("Testing error.");
        }
    });
    it('calls getTransactionHistory but receives an unknown environment', async () => {
        const client = getClientWithBody("tests/resources/models/transactionHistoryResponseWithMalformedEnvironment.json", (path, parsedQueryParameters, method, stringBody, headers) => {
        });
        const request = {
            sort: index_1.Order.ASCENDING,
            productTypes: [index_1.ProductType.CONSUMABLE, index_1.ProductType.AUTO_RENEWABLE],
            endDate: 123456,
            startDate: 123455,
            revoked: false,
            inAppOwnershipType: InAppOwnershipType_1.InAppOwnershipType.FAMILY_SHARED,
            productIds: ["com.example.1", "com.example.2"],
            subscriptionGroupIdentifiers: ["sub_group_id", "sub_group_id_2"]
        };
        const historyResponse = await client.getTransactionHistory("1234", "revision_input", request, index_1.GetTransactionHistoryVersion.V2);
        expect(historyResponse.environment).toBe("LocalTestingxxx");
    });
    it('calls getTransactionHistory but receives a malformed appAppleId', async () => {
        const client = getClientWithBody("tests/resources/models/transactionHistoryResponseWithMalformedAppAppleId.json", (path, parsedQueryParameters, method, stringBody, headers) => {
        });
        const request = {
            sort: index_1.Order.ASCENDING,
            productTypes: [index_1.ProductType.CONSUMABLE, index_1.ProductType.AUTO_RENEWABLE],
            endDate: 123456,
            startDate: 123455,
            revoked: false,
            inAppOwnershipType: InAppOwnershipType_1.InAppOwnershipType.FAMILY_SHARED,
            productIds: ["com.example.1", "com.example.2"],
            subscriptionGroupIdentifiers: ["sub_group_id", "sub_group_id_2"]
        };
        try {
            await client.getTransactionHistory("1234", "revision_input", request);
            fail('this test call is expected to throw');
        }
        catch (e) {
            return;
        }
    });
    it('throws an error when the XCODE environment is passed', async () => {
        try {
            const key = getSigningKey();
            new index_1.AppStoreServerAPIClient(key, "keyId", "issuerId", "bundleId", Environment_1.Environment.XCODE);
            fail('this test call is expected to throw');
        }
        catch (e) {
            let error = e;
            expect(error.message).toBe("Xcode is not a supported environment for an AppStoreServerAPIClient");
        }
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpX2NsaWVudC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdGVzdHMvdW5pdC10ZXN0cy9hcGlfY2xpZW50LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDREQUE0RDs7QUFFNUQsOERBQTJEO0FBRTNELHNFQUFtRTtBQUNuRSxnRUFBNkQ7QUFDN0QsMERBQXVEO0FBQ3ZELG9GQUFpRjtBQUNqRixrRkFBK0U7QUFDL0Usd0VBQXFFO0FBQ3JFLG9EQUFpRDtBQUNqRCxvREFBaUQ7QUFDakQsZ0RBQTZDO0FBQzdDLGtEQUErQztBQUMvQyx3REFBcUQ7QUFDckQsa0NBQWtDO0FBQ2xDLHdFQUFxRTtBQUNyRSxvRUFBaUU7QUFDakUsdUNBQXdVO0FBQ3hVLDJDQUFzQztBQUV0Qyw2Q0FBOEM7QUFJOUMsTUFBTSw4QkFBK0IsU0FBUSwrQkFBdUI7SUFNaEUsWUFBbUIsVUFBa0IsRUFBRSxLQUFhLEVBQUUsUUFBZ0IsRUFBRSxRQUFnQixFQUFFLFdBQXdCLEVBQUUsUUFBc0IsRUFBRSxJQUFZLEVBQUUsVUFBa0I7UUFDeEssS0FBSyxDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQTtRQUN6RCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQTtJQUNoQyxDQUFDO0lBQ1MsS0FBSyxDQUFDLGdCQUFnQixDQUFDLElBQVksRUFBRSxxQkFBc0MsRUFBRSxNQUFjLEVBQUUsVUFBOEIsRUFBRSxPQUFtQztRQUN0SyxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sVUFBVSxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxD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VyxDQUFDLFVBQVUsRUFBRSxtQkFBVyxDQUFDLGNBQWMsQ0FBQztZQUNsRSxPQUFPLEVBQUUsTUFBTTtZQUNmLFNBQVMsRUFBRSxNQUFNO1lBQ2pCLE9BQU8sRUFBRSxLQUFLO1lBQ2Qsa0JBQWtCLEVBQUUsdUNBQWtCLENBQUMsYUFBYTtZQUNwRCxVQUFVLEVBQUUsQ0FBQyxlQUFlLEVBQUUsZUFBZSxDQUFDO1lBQzlDLDRCQUE0QixFQUFFLENBQUMsY0FBYyxFQUFFLGdCQUFnQixDQUFDO1NBQ25FLENBQUE7UUFFRCxJQUFJLENBQUM7WUFDRCxNQUFNLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDdEUsSUFBSSxDQUFDLHFDQUFxQyxDQUFDLENBQUE7UUFDL0MsQ0FBQztRQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDVCxPQUFPO1FBQ1gsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFBO0lBRUYsRUFBRSxDQUFDLHNEQUFzRCxFQUFFLEtBQUssSUFBSSxFQUFFO1FBQ2xFLElBQUksQ0FBQztZQUNGLE1BQU0sR0FBRyxHQUFHLGFBQWEsRUFBRSxDQUFBO1lBQzNCLElBQUksK0JBQXVCLENBQUMsR0FBRyxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLHlCQUFXLENBQUMsS0FBSyxDQUFDLENBQUE7WUFDcEYsSUFBSSxDQUFDLHFDQUFxQyxDQUFDLENBQUE7UUFDOUMsQ0FBQztRQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUM7WUFDVixJQUFJLEtBQUssR0FBRyxDQUFVLENBQUE7WUFDdEIsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMscUVBQXFFLENBQUMsQ0FBQTtRQUNwRyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUE7QUFDUCxDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAoYykgMjAyMyBBcHBsZSBJbmMuIExpY2Vuc2VkIHVuZGVyIE1JVCBMaWNlbnNlLlxuXG5pbXBvcnQgeyBBY2NvdW50VGVudXJlIH0gZnJvbSBcIi4uLy4uL21vZGVscy9BY2NvdW50VGVudXJlXCI7XG5pbXBvcnQgeyBDb25zdW1wdGlvblJlcXVlc3QgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL0NvbnN1bXB0aW9uUmVxdWVzdFwiO1xuaW1wb3J0IHsgQ29uc3VtcHRpb25TdGF0dXMgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL0NvbnN1bXB0aW9uU3RhdHVzXCI7XG5pbXBvcnQgeyBEZWxpdmVyeVN0YXR1cyB9IGZyb20gXCIuLi8uLi9tb2RlbHMvRGVsaXZlcnlTdGF0dXNcIjtcbmltcG9ydCB7IEVudmlyb25tZW50IH0gZnJvbSBcIi4uLy4uL21vZGVscy9FbnZpcm9ubWVudFwiO1xuaW1wb3J0IHsgTGlmZXRpbWVEb2xsYXJzUHVyY2hhc2VkIH0gZnJvbSBcIi4uLy4uL21vZGVscy9MaWZldGltZURvbGxhcnNQdXJjaGFzZWRcIjtcbmltcG9ydCB7IExpZmV0aW1lRG9sbGFyc1JlZnVuZGVkIH0gZnJvbSBcIi4uLy4uL21vZGVscy9MaWZldGltZURvbGxhcnNSZWZ1bmRlZFwiO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uVHlwZVYyIH0gZnJvbSBcIi4uLy4uL21vZGVscy9Ob3RpZmljYXRpb25UeXBlVjJcIjtcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSBcIi4uLy4uL21vZGVscy9QbGF0Zm9ybVwiO1xuaW1wb3J0IHsgUGxheVRpbWUgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1BsYXlUaW1lXCI7XG5pbXBvcnQgeyBTdGF0dXMgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1N0YXR1c1wiO1xuaW1wb3J0IHsgU3VidHlwZSB9IGZyb20gXCIuLi8uLi9tb2RlbHMvU3VidHlwZVwiO1xuaW1wb3J0IHsgVXNlclN0YXR1cyB9IGZyb20gXCIuLi8uLi9tb2RlbHMvVXNlclN0YXR1c1wiO1xuaW1wb3J0IHsgcmVhZEZpbGUgfSBmcm9tIFwiLi4vdXRpbFwiXG5pbXBvcnQgeyBJbkFwcE93bmVyc2hpcFR5cGUgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL0luQXBwT3duZXJzaGlwVHlwZVwiO1xuaW1wb3J0IHsgUmVmdW5kUHJlZmVyZW5jZSB9IGZyb20gXCIuLi8uLi9tb2RlbHMvUmVmdW5kUHJlZmVyZW5jZVwiO1xuaW1wb3J0IHsgQVBJRXJyb3IsIEFQSUV4Y2VwdGlvbiwgQXBwU3RvcmVTZXJ2ZXJBUElDbGllbnQsIEV4dGVuZFJlYXNvbkNvZGUsIEV4dGVuZFJlbmV3YWxEYXRlUmVxdWVzdCwgR2V0VHJhbnNhY3Rpb25IaXN0b3J5VmVyc2lvbiwgTWFzc0V4dGVuZFJlbmV3YWxEYXRlUmVxdWVzdCwgTm90aWZpY2F0aW9uSGlzdG9yeVJlcXVlc3QsIE5vdGlmaWNhdGlvbkhpc3RvcnlSZXNwb25zZUl0ZW0sIE9yZGVyLCBPcmRlckxvb2t1cFN0YXR1cywgUHJvZHVjdFR5cGUsIFNlbmRBdHRlbXB0UmVzdWx0LCBUcmFuc2FjdGlvbkhpc3RvcnlSZXF1ZXN0IH0gZnJvbSBcIi4uLy4uL2luZGV4XCI7XG5pbXBvcnQgeyBSZXNwb25zZSB9IGZyb20gXCJub2RlLWZldGNoXCI7XG5cbmltcG9ydCBqc29ud2VidG9rZW4gPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcblxudHlwZSBjYWxsYmFja1R5cGUgPSAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHZvaWRcblxuY2xhc3MgQXBwU3RvcmVTZXJ2ZXJBUElDbGllbnRGb3JUZXN0IGV4dGVuZHMgQXBwU3RvcmVTZXJ2ZXJBUElDbGllbnQge1xuXG4gICAgcHJpdmF0ZSBjYWxsYmFjazogY2FsbGJhY2tUeXBlXG4gICAgcHJpdmF0ZSBib2R5OiBzdHJpbmdcbiAgICBwcml2YXRlIHN0YXR1c0NvZGU6IG51bWJlclxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHNpZ25pbmdLZXk6IHN0cmluZywga2V5SWQ6IHN0cmluZywgaXNzdWVySWQ6IHN0cmluZywgYnVuZGxlSWQ6IHN0cmluZywgZW52aXJvbm1lbnQ6IEVudmlyb25tZW50LCBjYWxsYmFjazogY2FsbGJhY2tUeXBlLCBib2R5OiBzdHJpbmcsIHN0YXR1c0NvZGU6IG51bWJlcikge1xuICAgICAgICBzdXBlcihzaWduaW5nS2V5LCBrZXlJZCwgaXNzdWVySWQsIGJ1bmRsZUlkLCBlbnZpcm9ubWVudClcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrXG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHlcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZVxuICAgIH1cbiAgICBwcm90ZWN0ZWQgYXN5bmMgbWFrZUZldGNoUmVxdWVzdChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICAgICAgZXhwZWN0KGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKS50b0JlKHR5cGVvZiBzdHJpbmdCb2R5ICE9PSAndW5kZWZpbmVkJyA/ICdhcHBsaWNhdGlvbi9qc29uJyA6IHVuZGVmaW5lZClcbiAgICAgICAgZXhwZWN0KCdhcHBsaWNhdGlvbi9qc29uJykudG9CZShoZWFkZXJzWydBY2NlcHQnXSlcbiAgICAgICAgZXhwZWN0KGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSkudG9NYXRjaCgvXkJlYXJlciAuKy8pXG4gICAgICAgIGNvbnN0IHRva2VuID0gaGVhZGVyc1snQXV0aG9yaXphdGlvbiddLnN1YnN0cmluZyg3KVxuICAgICAgICBjb25zdCBkZWNvZGVkVG9rZW4gPSBqc29ud2VidG9rZW4uZGVjb2RlKHRva2VuKSBhcyBqc29ud2VidG9rZW4uSnd0UGF5bG9hZFxuICAgICAgICBleHBlY3QoZGVjb2RlZFRva2VuWydiaWQnXSkudG9CZSgnYnVuZGxlSWQnKVxuICAgICAgICBleHBlY3QoZGVjb2RlZFRva2VuWydhdWQnXSkudG9CZSgnYXBwc3RvcmVjb25uZWN0LXYxJylcbiAgICAgICAgZXhwZWN0KGRlY29kZWRUb2tlblsnaXNzJ10pLnRvQmUoJ2lzc3VlcklkJylcbiAgICAgICAgZXhwZWN0KGhlYWRlcnNbJ1VzZXItQWdlbnQnXSkudG9NYXRjaCgvXmFwcC1zdG9yZS1zZXJ2ZXItbGlicmFyeVxcL25vZGVcXC8uKy8pXG4gICAgICAgIHRoaXMuY2FsbGJhY2socGF0aCwgcGFyc2VkUXVlcnlQYXJhbWV0ZXJzLCBtZXRob2QsIHN0cmluZ0JvZHksIGhlYWRlcnMpXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFJlc3BvbnNlKHRoaXMuYm9keSwge1xuICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1c0NvZGVcbiAgICAgICAgfSkpXG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRDbGllbnRXaXRoQm9keShwYXRoOiBzdHJpbmcsIGNhbGxiYWNrOiBjYWxsYmFja1R5cGUsIHN0YXR1c0NvZGU6IG51bWJlciA9IDIwMCk6IEFwcFN0b3JlU2VydmVyQVBJQ2xpZW50IHtcbiAgICBjb25zdCBib2R5ID0gcmVhZEZpbGUocGF0aClcbiAgICByZXR1cm4gZ2V0QXBwU3RvcmVTZXJ2ZXJBUElDbGllbnQoYm9keSwgc3RhdHVzQ29kZSwgY2FsbGJhY2spXG59XG5cbmZ1bmN0aW9uIGdldEFwcFN0b3JlU2VydmVyQVBJQ2xpZW50KGJvZHk6IHN0cmluZywgc3RhdHVzQ29kZTogbnVtYmVyLCBjYWxsYmFjazogY2FsbGJhY2tUeXBlKTogQXBwU3RvcmVTZXJ2ZXJBUElDbGllbnQge1xuICAgIGNvbnN0IGtleSA9IGdldFNpZ25pbmdLZXkoKVxuICAgIHJldHVybiBuZXcgQXBwU3RvcmVTZXJ2ZXJBUElDbGllbnRGb3JUZXN0KGtleSwgXCJrZXlJZFwiLCBcImlzc3VlcklkXCIsIFwiYnVuZGxlSWRcIiwgRW52aXJvbm1lbnQuTE9DQUxfVEVTVElORywgY2FsbGJhY2ssIGJvZHksIHN0YXR1c0NvZGUpXG59XG5cbmZ1bmN0aW9uIGdldFNpZ25pbmdLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gcmVhZEZpbGUoJ3Rlc3RzL3Jlc291cmNlcy9jZXJ0cy90ZXN0U2lnbmluZ0tleS5wOCcpXG59XG5cbmRlc2NyaWJlKCdUaGUgYXBpIGNsaWVudCAnLCAoKSA9PiB7XG4gICAgXG4gICAgaXQoJ2NhbGxzIGV4dGVuZFJlbmV3YWxEYXRlRm9yQWxsQWN0aXZlU3Vic2NyaWJlcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50V2l0aEJvZHkoXCJ0ZXN0cy9yZXNvdXJjZXMvbW9kZWxzL2V4dGVuZFJlbmV3YWxEYXRlRm9yQWxsQWN0aXZlU3Vic2NyaWJlcnNSZXNwb25zZS5qc29uXCIsIChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KFwiUE9TVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgIGV4cGVjdChcIi9pbkFwcHMvdjEvc3Vic2NyaXB0aW9ucy9leHRlbmQvbWFzc1wiKS50b0JlKHBhdGgpXG4gICAgICAgICAgICBleHBlY3QocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmVudHJpZXMubGVuZ3RoKS50b0JlKDApXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChzdHJpbmdCb2R5KS50b0JlVHJ1dGh5KClcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHN0cmluZ0JvZHkhKVxuICAgICAgICAgICAgZXhwZWN0KDQ1KS50b0JlKGJvZHkuZXh0ZW5kQnlEYXlzKVxuICAgICAgICAgICAgZXhwZWN0KDEpLnRvQmUoYm9keS5leHRlbmRSZWFzb25Db2RlKVxuICAgICAgICAgICAgZXhwZWN0KFwiZmRmOTY0YTQtMjMzYi00ODZjLWFhYzEtOTdkOGQ1MjY4OGFjXCIpLnRvQmUoYm9keS5yZXF1ZXN0SWRlbnRpZmllcilcbiAgICAgICAgICAgIGV4cGVjdChbXCJVU0FcIiwgXCJNRVhcIl0pLnRvU3RyaWN0RXF1YWwoYm9keS5zdG9yZWZyb250Q291bnRyeUNvZGVzKVxuICAgICAgICAgICAgZXhwZWN0KFwiY29tLmV4YW1wbGUucHJvZHVjdElkXCIpLnRvQmUoYm9keS5wcm9kdWN0SWQpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGV4dGVuZFJlbmV3YWxEYXRlUmVxdWVzdDogTWFzc0V4dGVuZFJlbmV3YWxEYXRlUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGV4dGVuZEJ5RGF5czogNDUsXG4gICAgICAgICAgICBleHRlbmRSZWFzb25Db2RlOiBFeHRlbmRSZWFzb25Db2RlLkNVU1RPTUVSX1NBVElTRkFDVElPTixcbiAgICAgICAgICAgIHJlcXVlc3RJZGVudGlmaWVyOiBcImZkZjk2NGE0LTIzM2ItNDg2Yy1hYWMxLTk3ZDhkNTI2ODhhY1wiLFxuICAgICAgICAgICAgc3RvcmVmcm9udENvdW50cnlDb2RlczogW1wiVVNBXCIsIFwiTUVYXCJdLFxuICAgICAgICAgICAgcHJvZHVjdElkOiBcImNvbS5leGFtcGxlLnByb2R1Y3RJZFwiXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtYXNzRXh0ZW5kUmVuZXdhbERhdGVSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5leHRlbmRSZW5ld2FsRGF0ZUZvckFsbEFjdGl2ZVN1YnNjcmliZXJzKGV4dGVuZFJlbmV3YWxEYXRlUmVxdWVzdCk7XG5cbiAgICAgICAgZXhwZWN0KG1hc3NFeHRlbmRSZW5ld2FsRGF0ZVJlc3BvbnNlKS50b0JlVHJ1dGh5KClcbiAgICAgICAgZXhwZWN0KFwiNzU4ODgzZTgtMTUxYi00N2I3LWFiZDAtNjBjNGQ4MDRjMmY1XCIpLnRvQmUobWFzc0V4dGVuZFJlbmV3YWxEYXRlUmVzcG9uc2UucmVxdWVzdElkZW50aWZpZXIpXG4gICAgfSlcblxuICAgIGl0KCdjYWxscyBleHRlbmRTdWJzY3JpcHRpb25SZW5ld2FsRGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnRXaXRoQm9keShcInRlc3RzL3Jlc291cmNlcy9tb2RlbHMvZXh0ZW5kU3Vic2NyaXB0aW9uUmVuZXdhbERhdGVSZXNwb25zZS5qc29uXCIsIChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KFwiUFVUXCIpLnRvQmUobWV0aG9kKVxuICAgICAgICAgICAgZXhwZWN0KFwiL2luQXBwcy92MS9zdWJzY3JpcHRpb25zL2V4dGVuZC80MTI0MjE0XCIpLnRvQmUocGF0aClcbiAgICAgICAgICAgIGV4cGVjdChwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZW50cmllcy5sZW5ndGgpLnRvQmUoMClcblxuICAgICAgICAgICAgZXhwZWN0KHN0cmluZ0JvZHkpLnRvQmVUcnV0aHkoKVxuICAgICAgICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2Uoc3RyaW5nQm9keSEpXG4gICAgICAgICAgICBleHBlY3QoNDUpLnRvQmUoYm9keS5leHRlbmRCeURheXMpXG4gICAgICAgICAgICBleHBlY3QoMSkudG9CZShib2R5LmV4dGVuZFJlYXNvbkNvZGUpXG4gICAgICAgICAgICBleHBlY3QoXCJmZGY5NjRhNC0yMzNiLTQ4NmMtYWFjMS05N2Q4ZDUyNjg4YWNcIikudG9CZShib2R5LnJlcXVlc3RJZGVudGlmaWVyKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBleHRlbmRSZW5ld2FsRGF0ZVJlcXVlc3Q6IEV4dGVuZFJlbmV3YWxEYXRlUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGV4dGVuZEJ5RGF5czogNDUsXG4gICAgICAgICAgICBleHRlbmRSZWFzb25Db2RlOiBFeHRlbmRSZWFzb25Db2RlLkNVU1RPTUVSX1NBVElTRkFDVElPTixcbiAgICAgICAgICAgIHJlcXVlc3RJZGVudGlmaWVyOiBcImZkZjk2NGE0LTIzM2ItNDg2Yy1hYWMxLTk3ZDhkNTI2ODhhY1wiXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBleHRlbmRSZW5ld2FsRGF0ZVJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmV4dGVuZFN1YnNjcmlwdGlvblJlbmV3YWxEYXRlKFwiNDEyNDIxNFwiLCBleHRlbmRSZW5ld2FsRGF0ZVJlcXVlc3QpO1xuXG4gICAgICAgIGV4cGVjdChleHRlbmRSZW5ld2FsRGF0ZVJlc3BvbnNlKS50b0JlVHJ1dGh5KClcbiAgICAgICAgZXhwZWN0KFwiMjMxMjQxMlwiKS50b0JlKGV4dGVuZFJlbmV3YWxEYXRlUmVzcG9uc2Uub3JpZ2luYWxUcmFuc2FjdGlvbklkKVxuICAgICAgICBleHBlY3QoXCI5OTkzXCIpLnRvQmUoZXh0ZW5kUmVuZXdhbERhdGVSZXNwb25zZS53ZWJPcmRlckxpbmVJdGVtSWQpXG4gICAgICAgIGV4cGVjdChleHRlbmRSZW5ld2FsRGF0ZVJlc3BvbnNlLnN1Y2Nlc3MpLnRvQmUodHJ1ZSlcbiAgICAgICAgZXhwZWN0KDE2OTgxNDg5MDAwMDApLnRvQmUoZXh0ZW5kUmVuZXdhbERhdGVSZXNwb25zZS5lZmZlY3RpdmVEYXRlKVxuICAgIH0pXG5cbiAgICBpdCgnY2FsbHMgZ2V0QWxsU3Vic2NyaXB0aW9uU3RhdHVzZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50V2l0aEJvZHkoXCJ0ZXN0cy9yZXNvdXJjZXMvbW9kZWxzL2dldEFsbFN1YnNjcmlwdGlvblN0YXR1c2VzUmVzcG9uc2UuanNvblwiLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgIGV4cGVjdChcIi9pbkFwcHMvdjEvc3Vic2NyaXB0aW9ucy80MzIxXCIpLnRvQmUocGF0aClcbiAgICAgICAgICAgIGV4cGVjdChbXCIyXCIsIFwiMVwiXSkudG9TdHJpY3RFcXVhbChwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZ2V0QWxsKFwic3RhdHVzXCIpKVxuICAgICAgICAgICAgZXhwZWN0KHN0cmluZ0JvZHkpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzdGF0dXNSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5nZXRBbGxTdWJzY3JpcHRpb25TdGF0dXNlcyhcIjQzMjFcIiwgW1N0YXR1cy5FWFBJUkVELCBTdGF0dXMuQUNUSVZFXSk7XG5cbiAgICAgICAgZXhwZWN0KHN0YXR1c1Jlc3BvbnNlKS50b0JlVHJ1dGh5KClcbiAgICAgICAgZXhwZWN0KEVudmlyb25tZW50LkxPQ0FMX1RFU1RJTkcpLnRvQmUoc3RhdHVzUmVzcG9uc2UuZW52aXJvbm1lbnQpXG4gICAgICAgIGV4cGVjdChcImNvbS5leGFtcGxlXCIpLnRvQmUoc3RhdHVzUmVzcG9uc2UuYnVuZGxlSWQpXG4gICAgICAgIGV4cGVjdCg1NDU0NTQ1KS50b0JlKHN0YXR1c1Jlc3BvbnNlLmFwcEFwcGxlSWQpXG5cbiAgICAgICAgY29uc3QgaXRlbSA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25Hcm91cElkZW50aWZpZXI6ICdzdWJfZ3JvdXBfb25lJyxcbiAgICAgICAgICAgICAgICBsYXN0VHJhbnNhY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogU3RhdHVzLkFDVElWRSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsVHJhbnNhY3Rpb25JZDogXCIzNzQ5MTgzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZWRUcmFuc2FjdGlvbkluZm86IFwic2lnbmVkX3RyYW5zYWN0aW9uX29uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVkUmVuZXdhbEluZm86IFwic2lnbmVkX3JlbmV3YWxfb25lXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBTdGF0dXMuUkVWT0tFRCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsVHJhbnNhY3Rpb25JZDogXCI1MzE0MzE0MTM0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduZWRUcmFuc2FjdGlvbkluZm86IFwic2lnbmVkX3RyYW5zYWN0aW9uX3R3b1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVkUmVuZXdhbEluZm86IFwic2lnbmVkX3JlbmV3YWxfdHdvXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uR3JvdXBJZGVudGlmaWVyOiBcInN1Yl9ncm91cF90d29cIixcbiAgICAgICAgICAgICAgICBsYXN0VHJhbnNhY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogU3RhdHVzLkVYUElSRUQsXG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFRyYW5zYWN0aW9uSWQ6IFwiMzQxMzQ1M1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVkVHJhbnNhY3Rpb25JbmZvOiBcInNpZ25lZF90cmFuc2FjdGlvbl90aHJlZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbmVkUmVuZXdhbEluZm86IFwic2lnbmVkX3JlbmV3YWxfdGhyZWVcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICAgIGV4cGVjdChzdGF0dXNSZXNwb25zZS5kYXRhKS50b1N0cmljdEVxdWFsKGl0ZW0pXG4gICAgfSlcblxuICAgIGl0KCdjYWxscyBnZXRSZWZ1bmRIaXN0b3J5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudFdpdGhCb2R5KFwidGVzdHMvcmVzb3VyY2VzL21vZGVscy9nZXRSZWZ1bmRIaXN0b3J5UmVzcG9uc2UuanNvblwiLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgIGV4cGVjdChcIi9pbkFwcHMvdjIvcmVmdW5kL2xvb2t1cC81NTU1NTVcIikudG9CZShwYXRoKVxuICAgICAgICAgICAgZXhwZWN0KFwicmV2aXNpb25faW5wdXRcIikudG9CZShwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZ2V0KFwicmV2aXNpb25cIikpXG4gICAgICAgICAgICBleHBlY3Qoc3RyaW5nQm9keSkudG9CZVVuZGVmaW5lZCgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlZnVuZEhpc3RvcnlSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5nZXRSZWZ1bmRIaXN0b3J5KFwiNTU1NTU1XCIsIFwicmV2aXNpb25faW5wdXRcIik7XG5cbiAgICAgICAgZXhwZWN0KHJlZnVuZEhpc3RvcnlSZXNwb25zZSkudG9CZVRydXRoeSgpXG4gICAgICAgIGV4cGVjdChbXCJzaWduZWRfdHJhbnNhY3Rpb25fb25lXCIsIFwic2lnbmVkX3RyYW5zYWN0aW9uX3R3b1wiXSkudG9TdHJpY3RFcXVhbChyZWZ1bmRIaXN0b3J5UmVzcG9uc2Uuc2lnbmVkVHJhbnNhY3Rpb25zKVxuICAgICAgICBleHBlY3QoXCJyZXZpc2lvbl9vdXRwdXRcIikudG9CZShyZWZ1bmRIaXN0b3J5UmVzcG9uc2UucmV2aXNpb24pXG4gICAgICAgIGV4cGVjdChyZWZ1bmRIaXN0b3J5UmVzcG9uc2UuaGFzTW9yZSkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICBpdCgnY2FsbHMgZ2V0U3RhdHVzT2ZTdWJzY3JpcHRpb25SZW5ld2FsRGF0ZUV4dGVuc2lvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50V2l0aEJvZHkoXCJ0ZXN0cy9yZXNvdXJjZXMvbW9kZWxzL2dldFN0YXR1c09mU3Vic2NyaXB0aW9uUmVuZXdhbERhdGVFeHRlbnNpb25zUmVzcG9uc2UuanNvblwiLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgIGV4cGVjdChcIi9pbkFwcHMvdjEvc3Vic2NyaXB0aW9ucy9leHRlbmQvbWFzcy8yMGZiYThhMC0yYjgwLTRhN2QtYTE3Zi04NWMxODU0NzI3ZjgvY29tLmV4YW1wbGUucHJvZHVjdFwiKS50b0JlKHBhdGgpXG4gICAgICAgICAgICBleHBlY3QocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmVudHJpZXMubGVuZ3RoKS50b0JlKDApXG4gICAgICAgICAgICBleHBlY3Qoc3RyaW5nQm9keSkudG9CZVVuZGVmaW5lZCgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1hc3NFeHRlbmRSZW5ld2FsRGF0ZVN0YXR1c1Jlc3BvbnNlID0gYXdhaXQgY2xpZW50LmdldFN0YXR1c09mU3Vic2NyaXB0aW9uUmVuZXdhbERhdGVFeHRlbnNpb25zKFwiY29tLmV4YW1wbGUucHJvZHVjdFwiLCBcIjIwZmJhOGEwLTJiODAtNGE3ZC1hMTdmLTg1YzE4NTQ3MjdmOFwiKTtcblxuICAgICAgICBleHBlY3QobWFzc0V4dGVuZFJlbmV3YWxEYXRlU3RhdHVzUmVzcG9uc2UpLnRvQmVUcnV0aHkoKVxuICAgICAgICBleHBlY3QoXCIyMGZiYThhMC0yYjgwLTRhN2QtYTE3Zi04NWMxODU0NzI3ZjhcIikudG9CZShtYXNzRXh0ZW5kUmVuZXdhbERhdGVTdGF0dXNSZXNwb25zZS5yZXF1ZXN0SWRlbnRpZmllcilcbiAgICAgICAgZXhwZWN0KG1hc3NFeHRlbmRSZW5ld2FsRGF0ZVN0YXR1c1Jlc3BvbnNlLmNvbXBsZXRlKS50b0JlKHRydWUpXG4gICAgICAgIGV4cGVjdCgxNjk4MTQ4OTAwMDAwKS50b0JlKG1hc3NFeHRlbmRSZW5ld2FsRGF0ZVN0YXR1c1Jlc3BvbnNlLmNvbXBsZXRlRGF0ZSlcbiAgICAgICAgZXhwZWN0KDMwKS50b0JlKG1hc3NFeHRlbmRSZW5ld2FsRGF0ZVN0YXR1c1Jlc3BvbnNlLnN1Y2NlZWRlZENvdW50KVxuICAgICAgICBleHBlY3QoMikudG9CZShtYXNzRXh0ZW5kUmVuZXdhbERhdGVTdGF0dXNSZXNwb25zZS5mYWlsZWRDb3VudClcbiAgICB9KVxuXG4gICAgaXQoJ2NhbGxzIGdldFRlc3ROb3RpZmljYXRpb25TdGF0dXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50V2l0aEJvZHkoXCJ0ZXN0cy9yZXNvdXJjZXMvbW9kZWxzL2dldFRlc3ROb3RpZmljYXRpb25TdGF0dXNSZXNwb25zZS5qc29uXCIsIChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KFwiR0VUXCIpLnRvQmUobWV0aG9kKVxuICAgICAgICAgICAgZXhwZWN0KFwiL2luQXBwcy92MS9ub3RpZmljYXRpb25zL3Rlc3QvOGNkMjk3NGMtZjkwNS00OTJhLWJmOWEtYjJmNDdjNzkxZDE5XCIpLnRvQmUocGF0aClcbiAgICAgICAgICAgIGV4cGVjdChwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZW50cmllcy5sZW5ndGgpLnRvQmUoMClcbiAgICAgICAgICAgIGV4cGVjdChzdHJpbmdCb2R5KS50b0JlVW5kZWZpbmVkKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2hlY2tUZXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuZ2V0VGVzdE5vdGlmaWNhdGlvblN0YXR1cyhcIjhjZDI5NzRjLWY5MDUtNDkyYS1iZjlhLWIyZjQ3Yzc5MWQxOVwiKTtcblxuICAgICAgICBleHBlY3QoY2hlY2tUZXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UpLnRvQmVUcnV0aHkoKTtcbiAgICAgICAgZXhwZWN0KFwic2lnbmVkX3BheWxvYWRcIikudG9CZShjaGVja1Rlc3ROb3RpZmljYXRpb25SZXNwb25zZS5zaWduZWRQYXlsb2FkKVxuICAgICAgICBjb25zdCBzZW5kQXR0ZW1wdEl0ZW1zID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGF0dGVtcHREYXRlOiAxNjk4MTQ4OTAwMDAwLFxuICAgICAgICAgICAgICAgIHNlbmRBdHRlbXB0UmVzdWx0OiBTZW5kQXR0ZW1wdFJlc3VsdC5OT19SRVNQT05TRVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBhdHRlbXB0RGF0ZTogMTY5ODE0ODk1MDAwMCxcbiAgICAgICAgICAgICAgICBzZW5kQXR0ZW1wdFJlc3VsdDogU2VuZEF0dGVtcHRSZXN1bHQuU1VDQ0VTU1xuICAgICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICAgIGV4cGVjdChzZW5kQXR0ZW1wdEl0ZW1zKS50b1N0cmljdEVxdWFsKGNoZWNrVGVzdE5vdGlmaWNhdGlvblJlc3BvbnNlLnNlbmRBdHRlbXB0cylcbiAgICB9KVxuXG4gICAgaXQoJ2NhbGxzIGdldE5vdGlmaWNhdGlvbkhpc3RvcnlSZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnRXaXRoQm9keShcInRlc3RzL3Jlc291cmNlcy9tb2RlbHMvZ2V0Tm90aWZpY2F0aW9uSGlzdG9yeVJlc3BvbnNlLmpzb25cIiwgKHBhdGg6IHN0cmluZywgcGFyc2VkUXVlcnlQYXJhbWV0ZXJzOiBVUkxTZWFyY2hQYXJhbXMsIG1ldGhvZDogc3RyaW5nLCBzdHJpbmdCb2R5OiBzdHJpbmcgfCB1bmRlZmluZWQsIGhlYWRlcnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nOyB9KSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoXCJQT1NUXCIpLnRvQmUobWV0aG9kKVxuICAgICAgICAgICAgZXhwZWN0KFwiL2luQXBwcy92MS9ub3RpZmljYXRpb25zL2hpc3RvcnlcIikudG9CZShwYXRoKVxuICAgICAgICAgICAgZXhwZWN0KFwiYTAzNmJjMGUtNTJiOC00YmVlLTgyZmMtOGMyNGNiNjcxNWQ2XCIpLnRvQmUocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldChcInBhZ2luYXRpb25Ub2tlblwiKSlcbiAgICAgICAgICAgIGV4cGVjdChzdHJpbmdCb2R5KS50b0JlVHJ1dGh5KClcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBKU09OLnBhcnNlKHN0cmluZ0JvZHkhKVxuICAgICAgICAgICAgZXhwZWN0KDE2OTgxNDg5MDAwMDApLnRvQmUoYm9keS5zdGFydERhdGUpXG4gICAgICAgICAgICBleHBlY3QoMTY5ODE0ODk1MDAwMCkudG9CZShib2R5LmVuZERhdGUpXG4gICAgICAgICAgICBleHBlY3QoXCJTVUJTQ1JJQkVEXCIpLnRvQmUoYm9keS5ub3RpZmljYXRpb25UeXBlKVxuICAgICAgICAgICAgZXhwZWN0KFwiSU5JVElBTF9CVVlcIikudG9CZShib2R5Lm5vdGlmaWNhdGlvblN1YnR5cGUpXG4gICAgICAgICAgICBleHBlY3QoXCI5OTk3MzM4NDNcIikudG9CZShib2R5LnRyYW5zYWN0aW9uSWQpXG4gICAgICAgICAgICBleHBlY3QoYm9keS5vbmx5RmFpbHVyZXMpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbkhpc3RvcnlSZXF1ZXN0OiBOb3RpZmljYXRpb25IaXN0b3J5UmVxdWVzdCA9IHtcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogMTY5ODE0ODkwMDAwMCxcbiAgICAgICAgICAgIGVuZERhdGU6IDE2OTgxNDg5NTAwMDAsXG4gICAgICAgICAgICBub3RpZmljYXRpb25UeXBlOiBOb3RpZmljYXRpb25UeXBlVjIuU1VCU0NSSUJFRCxcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvblN1YnR5cGU6IFN1YnR5cGUuSU5JVElBTF9CVVksXG4gICAgICAgICAgICB0cmFuc2FjdGlvbklkOiBcIjk5OTczMzg0M1wiLFxuICAgICAgICAgICAgb25seUZhaWx1cmVzOiB0cnVlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBub3RpZmljYXRpb25IaXN0b3J5UmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuZ2V0Tm90aWZpY2F0aW9uSGlzdG9yeShcImEwMzZiYzBlLTUyYjgtNGJlZS04MmZjLThjMjRjYjY3MTVkNlwiLCBub3RpZmljYXRpb25IaXN0b3J5UmVxdWVzdCk7XG5cbiAgICAgICAgZXhwZWN0KG5vdGlmaWNhdGlvbkhpc3RvcnlSZXNwb25zZSkudG9CZVRydXRoeSgpXG4gICAgICAgIGV4cGVjdChcIjU3NzE1NDgxLTgwNWEtNDI4My04NDk5LTFjMTliNWQ2YjIwYVwiKS50b0JlKG5vdGlmaWNhdGlvbkhpc3RvcnlSZXNwb25zZS5wYWdpbmF0aW9uVG9rZW4pXG4gICAgICAgIGV4cGVjdChub3RpZmljYXRpb25IaXN0b3J5UmVzcG9uc2UuaGFzTW9yZSkudG9CZSh0cnVlKVxuICAgICAgICBjb25zdCBleHBlY3RlZE5vdGlmaWNhdGlvbkhpc3Rvcnk6IE5vdGlmaWNhdGlvbkhpc3RvcnlSZXNwb25zZUl0ZW1bXSA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzZW5kQXR0ZW1wdHM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdERhdGU6IDE2OTgxNDg5MDAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kQXR0ZW1wdFJlc3VsdDogU2VuZEF0dGVtcHRSZXN1bHQuTk9fUkVTUE9OU0VcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdERhdGU6IDE2OTgxNDg5NTAwMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kQXR0ZW1wdFJlc3VsdDogU2VuZEF0dGVtcHRSZXN1bHQuU1VDQ0VTU1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzaWduZWRQYXlsb2FkOiBcInNpZ25lZF9wYXlsb2FkX29uZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNlbmRBdHRlbXB0czogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRlbXB0RGF0ZTogMTY5ODE0ODgwMDAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRBdHRlbXB0UmVzdWx0OiBTZW5kQXR0ZW1wdFJlc3VsdC5DSVJDVUxBUl9SRURJUkVDVFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzaWduZWRQYXlsb2FkOiBcInNpZ25lZF9wYXlsb2FkX3R3b1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkTm90aWZpY2F0aW9uSGlzdG9yeSkudG9TdHJpY3RFcXVhbChub3RpZmljYXRpb25IaXN0b3J5UmVzcG9uc2Uubm90aWZpY2F0aW9uSGlzdG9yeSlcbiAgICB9KVxuXG4gICAgaXQoJ2NhbGxzIGdldFRyYW5zYWN0aW9uSGlzdG9yeSBWMScsIGFzeW5jICgpID0+IHtcbiAgICAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnRXaXRoQm9keShcInRlc3RzL3Jlc291cmNlcy9tb2RlbHMvdHJhbnNhY3Rpb25IaXN0b3J5UmVzcG9uc2UuanNvblwiLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgIGV4cGVjdChcIi9pbkFwcHMvdjEvaGlzdG9yeS8xMjM0XCIpLnRvQmUocGF0aClcbiAgICAgICAgICAgIGV4cGVjdChcInJldmlzaW9uX2lucHV0XCIpLnRvQmUocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldChcInJldmlzaW9uXCIpKVxuICAgICAgICAgICAgZXhwZWN0KFwiMTIzNDU1XCIpLnRvQmUocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldChcInN0YXJ0RGF0ZVwiKSlcbiAgICAgICAgICAgIGV4cGVjdChcIjEyMzQ1NlwiKS50b0JlKHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5nZXQoXCJlbmREYXRlXCIpKVxuICAgICAgICAgICAgZXhwZWN0KFtcImNvbS5leGFtcGxlLjFcIiwgXCJjb20uZXhhbXBsZS4yXCJdKS50b1N0cmljdEVxdWFsKHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5nZXRBbGwoXCJwcm9kdWN0SWRcIikpXG4gICAgICAgICAgICBleHBlY3QoW1wiQ09OU1VNQUJMRVwiLCBcIkFVVE9fUkVORVdBQkxFXCJdKS50b1N0cmljdEVxdWFsKHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5nZXRBbGwoXCJwcm9kdWN0VHlwZVwiKSlcbiAgICAgICAgICAgIGV4cGVjdChcIkFTQ0VORElOR1wiKS50b0JlKHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5nZXQoXCJzb3J0XCIpKVxuICAgICAgICAgICAgZXhwZWN0KFtcInN1Yl9ncm91cF9pZFwiLCBcInN1Yl9ncm91cF9pZF8yXCJdKS50b1N0cmljdEVxdWFsKHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5nZXRBbGwoXCJzdWJzY3JpcHRpb25Hcm91cElkZW50aWZpZXJcIikpXG4gICAgICAgICAgICBleHBlY3QoXCJGQU1JTFlfU0hBUkVEXCIpLnRvQmUocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldChcImluQXBwT3duZXJzaGlwVHlwZVwiKSlcbiAgICAgICAgICAgIGV4cGVjdChcImZhbHNlXCIpLnRvQmUocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldChcInJldm9rZWRcIikpXG4gICAgICAgICAgICBleHBlY3Qoc3RyaW5nQm9keSkudG9CZVVuZGVmaW5lZCgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3Q6IFRyYW5zYWN0aW9uSGlzdG9yeVJlcXVlc3QgPSB7XG4gICAgICAgICAgICBzb3J0OiBPcmRlci5BU0NFTkRJTkcsXG4gICAgICAgICAgICBwcm9kdWN0VHlwZXM6IFtQcm9kdWN0VHlwZS5DT05TVU1BQkxFLCBQcm9kdWN0VHlwZS5BVVRPX1JFTkVXQUJMRV0sXG4gICAgICAgICAgICBlbmREYXRlOiAxMjM0NTYsXG4gICAgICAgICAgICBzdGFydERhdGU6IDEyMzQ1NSxcbiAgICAgICAgICAgIHJldm9rZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaW5BcHBPd25lcnNoaXBUeXBlOiBJbkFwcE93bmVyc2hpcFR5cGUuRkFNSUxZX1NIQVJFRCxcbiAgICAgICAgICAgIHByb2R1Y3RJZHM6IFtcImNvbS5leGFtcGxlLjFcIiwgXCJjb20uZXhhbXBsZS4yXCJdLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uR3JvdXBJZGVudGlmaWVyczogW1wic3ViX2dyb3VwX2lkXCIsIFwic3ViX2dyb3VwX2lkXzJcIl1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhpc3RvcnlSZXNwb25zZSA9IGF3YWl0IGNsaWVudC5nZXRUcmFuc2FjdGlvbkhpc3RvcnkoXCIxMjM0XCIsIFwicmV2aXNpb25faW5wdXRcIiwgcmVxdWVzdCwgR2V0VHJhbnNhY3Rpb25IaXN0b3J5VmVyc2lvbi5WMSk7XG5cbiAgICAgICAgZXhwZWN0KGhpc3RvcnlSZXNwb25zZSkudG9CZVRydXRoeSgpXG4gICAgICAgIGV4cGVjdChcInJldmlzaW9uX291dHB1dFwiKS50b0JlKGhpc3RvcnlSZXNwb25zZS5yZXZpc2lvbilcbiAgICAgICAgZXhwZWN0KGhpc3RvcnlSZXNwb25zZS5oYXNNb3JlKS50b0JlKHRydWUpXG4gICAgICAgIGV4cGVjdChcImNvbS5leGFtcGxlXCIpLnRvQmUoaGlzdG9yeVJlc3BvbnNlLmJ1bmRsZUlkKVxuICAgICAgICBleHBlY3QoMzIzMjMyKS50b0JlKGhpc3RvcnlSZXNwb25zZS5hcHBBcHBsZUlkKVxuICAgICAgICBleHBlY3QoRW52aXJvbm1lbnQuTE9DQUxfVEVTVElORykudG9CZShoaXN0b3J5UmVzcG9uc2UuZW52aXJvbm1lbnQpXG4gICAgICAgIGV4cGVjdChbXCJzaWduZWRfdHJhbnNhY3Rpb25fdmFsdWVcIiwgXCJzaWduZWRfdHJhbnNhY3Rpb25fdmFsdWUyXCJdKS50b1N0cmljdEVxdWFsKGhpc3RvcnlSZXNwb25zZS5zaWduZWRUcmFuc2FjdGlvbnMpXG4gICAgfSlcblxuICAgIGl0KCdjYWxscyBnZXRUcmFuc2FjdGlvbkhpc3RvcnkgVjInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudFdpdGhCb2R5KFwidGVzdHMvcmVzb3VyY2VzL21vZGVscy90cmFuc2FjdGlvbkhpc3RvcnlSZXNwb25zZS5qc29uXCIsIChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgICBleHBlY3QoXCIvaW5BcHBzL3YyL2hpc3RvcnkvMTIzNFwiKS50b0JlKHBhdGgpXG4gICAgICAgICAgICAgZXhwZWN0KFwicmV2aXNpb25faW5wdXRcIikudG9CZShwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZ2V0KFwicmV2aXNpb25cIikpXG4gICAgICAgICAgICAgZXhwZWN0KFwiMTIzNDU1XCIpLnRvQmUocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldChcInN0YXJ0RGF0ZVwiKSlcbiAgICAgICAgICAgICBleHBlY3QoXCIxMjM0NTZcIikudG9CZShwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZ2V0KFwiZW5kRGF0ZVwiKSlcbiAgICAgICAgICAgICBleHBlY3QoW1wiY29tLmV4YW1wbGUuMVwiLCBcImNvbS5leGFtcGxlLjJcIl0pLnRvU3RyaWN0RXF1YWwocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldEFsbChcInByb2R1Y3RJZFwiKSlcbiAgICAgICAgICAgICBleHBlY3QoW1wiQ09OU1VNQUJMRVwiLCBcIkFVVE9fUkVORVdBQkxFXCJdKS50b1N0cmljdEVxdWFsKHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5nZXRBbGwoXCJwcm9kdWN0VHlwZVwiKSlcbiAgICAgICAgICAgICBleHBlY3QoXCJBU0NFTkRJTkdcIikudG9CZShwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZ2V0KFwic29ydFwiKSlcbiAgICAgICAgICAgICBleHBlY3QoW1wic3ViX2dyb3VwX2lkXCIsIFwic3ViX2dyb3VwX2lkXzJcIl0pLnRvU3RyaWN0RXF1YWwocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldEFsbChcInN1YnNjcmlwdGlvbkdyb3VwSWRlbnRpZmllclwiKSlcbiAgICAgICAgICAgICBleHBlY3QoXCJGQU1JTFlfU0hBUkVEXCIpLnRvQmUocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmdldChcImluQXBwT3duZXJzaGlwVHlwZVwiKSlcbiAgICAgICAgICAgICBleHBlY3QoXCJmYWxzZVwiKS50b0JlKHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5nZXQoXCJyZXZva2VkXCIpKVxuICAgICAgICAgICAgIGV4cGVjdChzdHJpbmdCb2R5KS50b0JlVW5kZWZpbmVkKClcbiAgICAgICAgIH0pO1xuIFxuICAgICAgICAgY29uc3QgcmVxdWVzdDogVHJhbnNhY3Rpb25IaXN0b3J5UmVxdWVzdCA9IHtcbiAgICAgICAgICAgICBzb3J0OiBPcmRlci5BU0NFTkRJTkcsXG4gICAgICAgICAgICAgcHJvZHVjdFR5cGVzOiBbUHJvZHVjdFR5cGUuQ09OU1VNQUJMRSwgUHJvZHVjdFR5cGUuQVVUT19SRU5FV0FCTEVdLFxuICAgICAgICAgICAgIGVuZERhdGU6IDEyMzQ1NixcbiAgICAgICAgICAgICBzdGFydERhdGU6IDEyMzQ1NSxcbiAgICAgICAgICAgICByZXZva2VkOiBmYWxzZSxcbiAgICAgICAgICAgICBpbkFwcE93bmVyc2hpcFR5cGU6IEluQXBwT3duZXJzaGlwVHlwZS5GQU1JTFlfU0hBUkVELFxuICAgICAgICAgICAgIHByb2R1Y3RJZHM6IFtcImNvbS5leGFtcGxlLjFcIiwgXCJjb20uZXhhbXBsZS4yXCJdLFxuICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkdyb3VwSWRlbnRpZmllcnM6IFtcInN1Yl9ncm91cF9pZFwiLCBcInN1Yl9ncm91cF9pZF8yXCJdXG4gICAgICAgICB9XG4gXG4gICAgICAgICBjb25zdCBoaXN0b3J5UmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuZ2V0VHJhbnNhY3Rpb25IaXN0b3J5KFwiMTIzNFwiLCBcInJldmlzaW9uX2lucHV0XCIsIHJlcXVlc3QsIEdldFRyYW5zYWN0aW9uSGlzdG9yeVZlcnNpb24uVjIpO1xuIFxuICAgICAgICAgZXhwZWN0KGhpc3RvcnlSZXNwb25zZSkudG9CZVRydXRoeSgpXG4gICAgICAgICBleHBlY3QoXCJyZXZpc2lvbl9vdXRwdXRcIikudG9CZShoaXN0b3J5UmVzcG9uc2UucmV2aXNpb24pXG4gICAgICAgICBleHBlY3QoaGlzdG9yeVJlc3BvbnNlLmhhc01vcmUpLnRvQmUodHJ1ZSlcbiAgICAgICAgIGV4cGVjdChcImNvbS5leGFtcGxlXCIpLnRvQmUoaGlzdG9yeVJlc3BvbnNlLmJ1bmRsZUlkKVxuICAgICAgICAgZXhwZWN0KDMyMzIzMikudG9CZShoaXN0b3J5UmVzcG9uc2UuYXBwQXBwbGVJZClcbiAgICAgICAgIGV4cGVjdChFbnZpcm9ubWVudC5MT0NBTF9URVNUSU5HKS50b0JlKGhpc3RvcnlSZXNwb25zZS5lbnZpcm9ubWVudClcbiAgICAgICAgIGV4cGVjdChbXCJzaWduZWRfdHJhbnNhY3Rpb25fdmFsdWVcIiwgXCJzaWduZWRfdHJhbnNhY3Rpb25fdmFsdWUyXCJdKS50b1N0cmljdEVxdWFsKGhpc3RvcnlSZXNwb25zZS5zaWduZWRUcmFuc2FjdGlvbnMpXG4gICAgIH0pXG5cbiAgICBpdCgnY2FsbHMgZ2V0VHJhbnNhY3Rpb25JbmZvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudFdpdGhCb2R5KFwidGVzdHMvcmVzb3VyY2VzL21vZGVscy90cmFuc2FjdGlvbkluZm9SZXNwb25zZS5qc29uXCIsIChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgZXhwZWN0KFwiR0VUXCIpLnRvQmUobWV0aG9kKVxuICAgICAgICAgICAgZXhwZWN0KFwiL2luQXBwcy92MS90cmFuc2FjdGlvbnMvMTIzNFwiKS50b0JlKHBhdGgpXG4gICAgICAgICAgICBleHBlY3QocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmVudHJpZXMubGVuZ3RoKS50b0JlKDApXG4gICAgICAgICAgICBleHBlY3Qoc3RyaW5nQm9keSkudG9CZVVuZGVmaW5lZCgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRyYW5zYWN0aW9uSW5mb1Jlc3BvbnNlID0gYXdhaXQgY2xpZW50LmdldFRyYW5zYWN0aW9uSW5mbyhcIjEyMzRcIik7XG5cbiAgICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uSW5mb1Jlc3BvbnNlKS50b0JlVHJ1dGh5KClcbiAgICAgICAgZXhwZWN0KFwic2lnbmVkX3RyYW5zYWN0aW9uX2luZm9fdmFsdWVcIikudG9CZSh0cmFuc2FjdGlvbkluZm9SZXNwb25zZS5zaWduZWRUcmFuc2FjdGlvbkluZm8pXG4gICAgfSlcblxuICAgIGl0KCdjYWxscyBsb29rVXBPcmRlcklkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudFdpdGhCb2R5KFwidGVzdHMvcmVzb3VyY2VzL21vZGVscy9sb29rdXBPcmRlcklkUmVzcG9uc2UuanNvblwiLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgIGV4cGVjdChcIi9pbkFwcHMvdjEvbG9va3VwL1cwMDIxODJcIikudG9CZShwYXRoKVxuICAgICAgICAgICAgZXhwZWN0KHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5lbnRyaWVzLmxlbmd0aCkudG9CZSgwKVxuICAgICAgICAgICAgZXhwZWN0KHN0cmluZ0JvZHkpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBvcmRlckxvb2t1cFJlc3BvbnNlID0gYXdhaXQgY2xpZW50Lmxvb2tVcE9yZGVySWQoXCJXMDAyMTgyXCIpO1xuXG4gICAgICAgIGV4cGVjdChvcmRlckxvb2t1cFJlc3BvbnNlKS50b0JlVHJ1dGh5KClcbiAgICAgICAgZXhwZWN0KE9yZGVyTG9va3VwU3RhdHVzLklOVkFMSUQpLnRvQmUob3JkZXJMb29rdXBSZXNwb25zZS5zdGF0dXMpXG4gICAgICAgIGV4cGVjdChbXCJzaWduZWRfdHJhbnNhY3Rpb25fb25lXCIsIFwic2lnbmVkX3RyYW5zYWN0aW9uX3R3b1wiXSkudG9TdHJpY3RFcXVhbChvcmRlckxvb2t1cFJlc3BvbnNlLnNpZ25lZFRyYW5zYWN0aW9ucylcbiAgICB9KVxuXG4gICAgaXQoJ2NhbGxzIHJlcXVlc3RUZXN0Tm90aWZpY2F0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudFdpdGhCb2R5KFwidGVzdHMvcmVzb3VyY2VzL21vZGVscy9yZXF1ZXN0VGVzdE5vdGlmaWNhdGlvblJlc3BvbnNlLmpzb25cIiwgKHBhdGg6IHN0cmluZywgcGFyc2VkUXVlcnlQYXJhbWV0ZXJzOiBVUkxTZWFyY2hQYXJhbXMsIG1ldGhvZDogc3RyaW5nLCBzdHJpbmdCb2R5OiBzdHJpbmcgfCB1bmRlZmluZWQsIGhlYWRlcnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nOyB9KSA9PiB7XG4gICAgICAgICAgICBleHBlY3QoXCJQT1NUXCIpLnRvQmUobWV0aG9kKVxuICAgICAgICAgICAgZXhwZWN0KFwiL2luQXBwcy92MS9ub3RpZmljYXRpb25zL3Rlc3RcIikudG9CZShwYXRoKVxuICAgICAgICAgICAgZXhwZWN0KHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5lbnRyaWVzLmxlbmd0aCkudG9CZSgwKVxuICAgICAgICAgICAgZXhwZWN0KHN0cmluZ0JvZHkpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzZW5kVGVzdE5vdGlmaWNhdGlvblJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnJlcXVlc3RUZXN0Tm90aWZpY2F0aW9uKCk7XG5cbiAgICAgICAgZXhwZWN0KHNlbmRUZXN0Tm90aWZpY2F0aW9uUmVzcG9uc2UpLnRvQmVUcnV0aHkoKVxuICAgICAgICBleHBlY3QoXCJjZTNhZjc5MS0zNjVlLTRjNjAtODQxYi0xNjc0YjQzYzE2MDlcIikudG9CZShzZW5kVGVzdE5vdGlmaWNhdGlvblJlc3BvbnNlLnRlc3ROb3RpZmljYXRpb25Ub2tlbilcbiAgICB9KVxuXG4gICAgaXQoJ2NhbGxzIHNlbmRDb25zdW1wdGlvbkRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgY29uc3QgY2xpZW50ID0gZ2V0QXBwU3RvcmVTZXJ2ZXJBUElDbGllbnQoXCJcIiwgMjAwLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGV4cGVjdChcIlBVVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgIGV4cGVjdChcIi9pbkFwcHMvdjEvdHJhbnNhY3Rpb25zL2NvbnN1bXB0aW9uLzQ5NTcxMjczXCIpLnRvQmUocGF0aClcbiAgICAgICAgICAgIGV4cGVjdChwYXJzZWRRdWVyeVBhcmFtZXRlcnMuZW50cmllcy5sZW5ndGgpLnRvQmUoMClcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHN0cmluZ0JvZHkpLnRvQmVUcnV0aHkoKVxuICAgICAgICAgICAgY29uc3QgYm9keSA9IEpTT04ucGFyc2Uoc3RyaW5nQm9keSEpXG4gICAgICAgICAgICBleHBlY3QoYm9keS5jdXN0b21lckNvbnNlbnRlZCkudG9CZSh0cnVlKVxuICAgICAgICAgICAgZXhwZWN0KDEpLnRvQmUoYm9keS5jb25zdW1wdGlvblN0YXR1cylcbiAgICAgICAgICAgIGV4cGVjdCgyKS50b0JlKGJvZHkucGxhdGZvcm0pXG4gICAgICAgICAgICBleHBlY3QoYm9keS5zYW1wbGVDb250ZW50UHJvdmlkZWQpLnRvQmUoZmFsc2UpXG4gICAgICAgICAgICBleHBlY3QoMykudG9CZShib2R5LmRlbGl2ZXJ5U3RhdHVzKVxuICAgICAgICAgICAgZXhwZWN0KFwiNzM4OWEzMWEtZmI2ZC00NTY5LWEyYTYtZGI3ZDg1ZDg0ODEzXCIpLnRvQmUoYm9keS5hcHBBY2NvdW50VG9rZW4pXG4gICAgICAgICAgICBleHBlY3QoNCkudG9CZShib2R5LmFjY291bnRUZW51cmUpXG4gICAgICAgICAgICBleHBlY3QoNSkudG9CZShib2R5LnBsYXlUaW1lKVxuICAgICAgICAgICAgZXhwZWN0KDYpLnRvQmUoYm9keS5saWZldGltZURvbGxhcnNSZWZ1bmRlZClcbiAgICAgICAgICAgIGV4cGVjdCg3KS50b0JlKGJvZHkubGlmZXRpbWVEb2xsYXJzUHVyY2hhc2VkKVxuICAgICAgICAgICAgZXhwZWN0KDQpLnRvQmUoYm9keS51c2VyU3RhdHVzKVxuICAgICAgICAgICAgZXhwZWN0KDMpLnRvQmUoYm9keS5yZWZ1bmRQcmVmZXJlbmNlKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjb25zdW1wdGlvblJlcXVlc3Q6IENvbnN1bXB0aW9uUmVxdWVzdCA9IHtcbiAgICAgICAgICAgIGN1c3RvbWVyQ29uc2VudGVkOiB0cnVlLFxuICAgICAgICAgICAgY29uc3VtcHRpb25TdGF0dXM6IENvbnN1bXB0aW9uU3RhdHVzLk5PVF9DT05TVU1FRCxcbiAgICAgICAgICAgIHBsYXRmb3JtOiBQbGF0Zm9ybS5OT05fQVBQTEUsXG4gICAgICAgICAgICBzYW1wbGVDb250ZW50UHJvdmlkZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZGVsaXZlcnlTdGF0dXM6IERlbGl2ZXJ5U3RhdHVzLkRJRF9OT1RfREVMSVZFUl9EVUVfVE9fU0VSVkVSX09VVEFHRSxcbiAgICAgICAgICAgIGFwcEFjY291bnRUb2tlbjogXCI3Mzg5YTMxYS1mYjZkLTQ1NjktYTJhNi1kYjdkODVkODQ4MTNcIixcbiAgICAgICAgICAgIGFjY291bnRUZW51cmU6IEFjY291bnRUZW51cmUuVEhJUlRZX0RBWVNfVE9fTklORVRZX0RBWVMsXG4gICAgICAgICAgICBwbGF5VGltZTogUGxheVRpbWUuT05FX0RBWV9UT19GT1VSX0RBWVMsXG4gICAgICAgICAgICBsaWZldGltZURvbGxhcnNSZWZ1bmRlZDogTGlmZXRpbWVEb2xsYXJzUmVmdW5kZWQuT05FX1RIT1VTQU5EX0RPTExBUlNfVE9fT05FX1RIT1VTQU5EX05JTkVfSFVORFJFRF9OSU5FVFlfTklORV9ET0xMQVJTX0FORF9OSU5FVFlfTklORV9DRU5UUyxcbiAgICAgICAgICAgIGxpZmV0aW1lRG9sbGFyc1B1cmNoYXNlZDogTGlmZXRpbWVEb2xsYXJzUHVyY2hhc2VkLlRXT19USE9VU0FORF9ET0xMQVJTX09SX0dSRUFURVIsXG4gICAgICAgICAgICB1c2VyU3RhdHVzOiBVc2VyU3RhdHVzLkxJTUlURURfQUNDRVNTLFxuICAgICAgICAgICAgcmVmdW5kUHJlZmVyZW5jZTogUmVmdW5kUHJlZmVyZW5jZS5OT19QUkVGRVJFTkNFXG4gICAgICAgIH1cblxuICAgICAgICBjbGllbnQuc2VuZENvbnN1bXB0aW9uRGF0YShcIjQ5NTcxMjczXCIsIGNvbnN1bXB0aW9uUmVxdWVzdCk7XG4gICAgfSlcblxuICAgIGl0KCdjYWxscyBnZXRUcmFuc2FjdGlvbkluZm8gYnV0IHJlY2VpdmVzIGEgZ2VuZXJhbCBpbnRlcm5hbCBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50V2l0aEJvZHkoXCJ0ZXN0cy9yZXNvdXJjZXMvbW9kZWxzL2FwaUV4Y2VwdGlvbi5qc29uXCIsIChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgICBleHBlY3QoXCIvaW5BcHBzL3YxL3RyYW5zYWN0aW9ucy8xMjM0XCIpLnRvQmUocGF0aClcbiAgICAgICAgICAgICBleHBlY3QocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmVudHJpZXMubGVuZ3RoKS50b0JlKDApXG4gICAgICAgICAgICAgZXhwZWN0KHN0cmluZ0JvZHkpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICAgfSwgNTAwKTtcbiBcbiAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbkluZm9SZXNwb25zZSA9IGF3YWl0IGNsaWVudC5nZXRUcmFuc2FjdGlvbkluZm8oXCIxMjM0XCIpO1xuICAgICAgICAgICAgZmFpbCgndGhpcyB0ZXN0IGNhbGwgaXMgZXhwZWN0ZWQgdG8gdGhyb3cnKVxuICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gZSBhcyBBUElFeGNlcHRpb25cbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5odHRwU3RhdHVzQ29kZSkudG9CZSg1MDApXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IuYXBpRXJyb3IpLnRvQmUoQVBJRXJyb3IuR0VORVJBTF9JTlRFUk5BTClcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5lcnJvck1lc3NhZ2UpLnRvQmUoXCJBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLlwiKVxuICAgICAgICAgfVxuICAgICB9KVxuXG4gICAgIGl0KCdjYWxscyBnZXRUcmFuc2FjdGlvbkluZm8gYnV0IHJlY2VpdmVzIGEgcmF0ZSBsaW1pdCBleGNlZWRlZCBlcnJvcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50V2l0aEJvZHkoXCJ0ZXN0cy9yZXNvdXJjZXMvbW9kZWxzL2FwaVRvb01hbnlSZXF1ZXN0c0V4Y2VwdGlvbi5qc29uXCIsIChwYXRoOiBzdHJpbmcsIHBhcnNlZFF1ZXJ5UGFyYW1ldGVyczogVVJMU2VhcmNoUGFyYW1zLCBtZXRob2Q6IHN0cmluZywgc3RyaW5nQm9keTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgIGV4cGVjdChcIkdFVFwiKS50b0JlKG1ldGhvZClcbiAgICAgICAgICAgICBleHBlY3QoXCIvaW5BcHBzL3YxL3RyYW5zYWN0aW9ucy8xMjM0XCIpLnRvQmUocGF0aClcbiAgICAgICAgICAgICBleHBlY3QocGFyc2VkUXVlcnlQYXJhbWV0ZXJzLmVudHJpZXMubGVuZ3RoKS50b0JlKDApXG4gICAgICAgICAgICAgZXhwZWN0KHN0cmluZ0JvZHkpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICAgfSwgNDI5KTtcbiBcbiAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2FjdGlvbkluZm9SZXNwb25zZSA9IGF3YWl0IGNsaWVudC5nZXRUcmFuc2FjdGlvbkluZm8oXCIxMjM0XCIpO1xuICAgICAgICAgICAgZmFpbCgndGhpcyB0ZXN0IGNhbGwgaXMgZXhwZWN0ZWQgdG8gdGhyb3cnKVxuICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGV0IGVycm9yID0gZSBhcyBBUElFeGNlcHRpb25cbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5odHRwU3RhdHVzQ29kZSkudG9CZSg0MjkpXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IuYXBpRXJyb3IpLnRvQmUoQVBJRXJyb3IuUkFURV9MSU1JVF9FWENFRURFRClcbiAgICAgICAgICAgIGV4cGVjdChlcnJvci5lcnJvck1lc3NhZ2UpLnRvQmUoXCJSYXRlIGxpbWl0IGV4Y2VlZGVkLlwiKVxuICAgICAgICAgfVxuICAgICB9KVxuXG4gICAgIGl0KCdjYWxscyBnZXRUcmFuc2FjdGlvbkluZm8gYnV0IHJlY2VpdmVzIGFuIHVua25vd24vbmV3IGVycm9yIGNvZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudFdpdGhCb2R5KFwidGVzdHMvcmVzb3VyY2VzL21vZGVscy9hcGlVbmtub3duRXJyb3IuanNvblwiLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgICBleHBlY3QoXCJHRVRcIikudG9CZShtZXRob2QpXG4gICAgICAgICAgICAgZXhwZWN0KFwiL2luQXBwcy92MS90cmFuc2FjdGlvbnMvMTIzNFwiKS50b0JlKHBhdGgpXG4gICAgICAgICAgICAgZXhwZWN0KHBhcnNlZFF1ZXJ5UGFyYW1ldGVycy5lbnRyaWVzLmxlbmd0aCkudG9CZSgwKVxuICAgICAgICAgICAgIGV4cGVjdChzdHJpbmdCb2R5KS50b0JlVW5kZWZpbmVkKClcbiAgICAgICAgIH0sIDQwMCk7XG4gXG4gICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25JbmZvUmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuZ2V0VHJhbnNhY3Rpb25JbmZvKFwiMTIzNFwiKTtcbiAgICAgICAgICAgIGZhaWwoJ3RoaXMgdGVzdCBjYWxsIGlzIGV4cGVjdGVkIHRvIHRocm93JylcbiAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGxldCBlcnJvciA9IGUgYXMgQVBJRXhjZXB0aW9uXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IuaHR0cFN0YXR1c0NvZGUpLnRvQmUoNDAwKVxuICAgICAgICAgICAgZXhwZWN0KGVycm9yLmFwaUVycm9yKS50b0JlKDk5OTAwMDApXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IuZXJyb3JNZXNzYWdlKS50b0JlKFwiVGVzdGluZyBlcnJvci5cIilcbiAgICAgICAgIH1cbiAgICAgfSlcblxuICAgICBpdCgnY2FsbHMgZ2V0VHJhbnNhY3Rpb25IaXN0b3J5IGJ1dCByZWNlaXZlcyBhbiB1bmtub3duIGVudmlyb25tZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnRXaXRoQm9keShcInRlc3RzL3Jlc291cmNlcy9tb2RlbHMvdHJhbnNhY3Rpb25IaXN0b3J5UmVzcG9uc2VXaXRoTWFsZm9ybWVkRW52aXJvbm1lbnQuanNvblwiLCAocGF0aDogc3RyaW5nLCBwYXJzZWRRdWVyeVBhcmFtZXRlcnM6IFVSTFNlYXJjaFBhcmFtcywgbWV0aG9kOiBzdHJpbmcsIHN0cmluZ0JvZHk6IHN0cmluZyB8IHVuZGVmaW5lZCwgaGVhZGVyczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdDogVHJhbnNhY3Rpb25IaXN0b3J5UmVxdWVzdCA9IHtcbiAgICAgICAgICAgIHNvcnQ6IE9yZGVyLkFTQ0VORElORyxcbiAgICAgICAgICAgIHByb2R1Y3RUeXBlczogW1Byb2R1Y3RUeXBlLkNPTlNVTUFCTEUsIFByb2R1Y3RUeXBlLkFVVE9fUkVORVdBQkxFXSxcbiAgICAgICAgICAgIGVuZERhdGU6IDEyMzQ1NixcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogMTIzNDU1LFxuICAgICAgICAgICAgcmV2b2tlZDogZmFsc2UsXG4gICAgICAgICAgICBpbkFwcE93bmVyc2hpcFR5cGU6IEluQXBwT3duZXJzaGlwVHlwZS5GQU1JTFlfU0hBUkVELFxuICAgICAgICAgICAgcHJvZHVjdElkczogW1wiY29tLmV4YW1wbGUuMVwiLCBcImNvbS5leGFtcGxlLjJcIl0sXG4gICAgICAgICAgICBzdWJzY3JpcHRpb25Hcm91cElkZW50aWZpZXJzOiBbXCJzdWJfZ3JvdXBfaWRcIiwgXCJzdWJfZ3JvdXBfaWRfMlwiXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGlzdG9yeVJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmdldFRyYW5zYWN0aW9uSGlzdG9yeShcIjEyMzRcIiwgXCJyZXZpc2lvbl9pbnB1dFwiLCByZXF1ZXN0LCBHZXRUcmFuc2FjdGlvbkhpc3RvcnlWZXJzaW9uLlYyKTtcbiAgICAgICAgZXhwZWN0KGhpc3RvcnlSZXNwb25zZS5lbnZpcm9ubWVudCkudG9CZShcIkxvY2FsVGVzdGluZ3h4eFwiKVxuICAgICB9KVxuXG4gICAgIGl0KCdjYWxscyBnZXRUcmFuc2FjdGlvbkhpc3RvcnkgYnV0IHJlY2VpdmVzIGEgbWFsZm9ybWVkIGFwcEFwcGxlSWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudFdpdGhCb2R5KFwidGVzdHMvcmVzb3VyY2VzL21vZGVscy90cmFuc2FjdGlvbkhpc3RvcnlSZXNwb25zZVdpdGhNYWxmb3JtZWRBcHBBcHBsZUlkLmpzb25cIiwgKHBhdGg6IHN0cmluZywgcGFyc2VkUXVlcnlQYXJhbWV0ZXJzOiBVUkxTZWFyY2hQYXJhbXMsIG1ldGhvZDogc3RyaW5nLCBzdHJpbmdCb2R5OiBzdHJpbmcgfCB1bmRlZmluZWQsIGhlYWRlcnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nOyB9KSA9PiB7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3Q6IFRyYW5zYWN0aW9uSGlzdG9yeVJlcXVlc3QgPSB7XG4gICAgICAgICAgICBzb3J0OiBPcmRlci5BU0NFTkRJTkcsXG4gICAgICAgICAgICBwcm9kdWN0VHlwZXM6IFtQcm9kdWN0VHlwZS5DT05TVU1BQkxFLCBQcm9kdWN0VHlwZS5BVVRPX1JFTkVXQUJMRV0sXG4gICAgICAgICAgICBlbmREYXRlOiAxMjM0NTYsXG4gICAgICAgICAgICBzdGFydERhdGU6IDEyMzQ1NSxcbiAgICAgICAgICAgIHJldm9rZWQ6IGZhbHNlLFxuICAgICAgICAgICAgaW5BcHBPd25lcnNoaXBUeXBlOiBJbkFwcE93bmVyc2hpcFR5cGUuRkFNSUxZX1NIQVJFRCxcbiAgICAgICAgICAgIHByb2R1Y3RJZHM6IFtcImNvbS5leGFtcGxlLjFcIiwgXCJjb20uZXhhbXBsZS4yXCJdLFxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uR3JvdXBJZGVudGlmaWVyczogW1wic3ViX2dyb3VwX2lkXCIsIFwic3ViX2dyb3VwX2lkXzJcIl1cbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBjbGllbnQuZ2V0VHJhbnNhY3Rpb25IaXN0b3J5KFwiMTIzNFwiLCBcInJldmlzaW9uX2lucHV0XCIsIHJlcXVlc3QpO1xuICAgICAgICAgICAgZmFpbCgndGhpcyB0ZXN0IGNhbGwgaXMgZXhwZWN0ZWQgdG8gdGhyb3cnKVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgfSlcbiAgICAgXG4gICAgIGl0KCd0aHJvd3MgYW4gZXJyb3Igd2hlbiB0aGUgWENPREUgZW52aXJvbm1lbnQgaXMgcGFzc2VkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGdldFNpZ25pbmdLZXkoKVxuICAgICAgICAgICAgbmV3IEFwcFN0b3JlU2VydmVyQVBJQ2xpZW50KGtleSwgXCJrZXlJZFwiLCBcImlzc3VlcklkXCIsIFwiYnVuZGxlSWRcIiwgRW52aXJvbm1lbnQuWENPREUpXG4gICAgICAgICAgICBmYWlsKCd0aGlzIHRlc3QgY2FsbCBpcyBleHBlY3RlZCB0byB0aHJvdycpXG4gICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBsZXQgZXJyb3IgPSBlIGFzIEVycm9yXG4gICAgICAgICAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9CZShcIlhjb2RlIGlzIG5vdCBhIHN1cHBvcnRlZCBlbnZpcm9ubWVudCBmb3IgYW4gQXBwU3RvcmVTZXJ2ZXJBUElDbGllbnRcIilcbiAgICAgICAgIH1cbiAgICAgfSlcbn0pIl19