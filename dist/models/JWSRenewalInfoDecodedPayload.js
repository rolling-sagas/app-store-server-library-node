"use strict";
// Copyright (c) 2023 Apple Inc. Licensed under MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
exports.JWSRenewalInfoDecodedPayloadValidator = void 0;
const AutoRenewStatus_1 = require("./AutoRenewStatus");
const Environment_1 = require("./Environment");
const ExpirationIntent_1 = require("./ExpirationIntent");
const OfferDiscountType_1 = require("./OfferDiscountType");
const OfferType_1 = require("./OfferType");
const PriceIncreaseStatus_1 = require("./PriceIncreaseStatus");
class JWSRenewalInfoDecodedPayloadValidator {
    validate(obj) {
        if ((typeof obj['expirationIntent'] !== 'undefined') && !(JWSRenewalInfoDecodedPayloadValidator.expirationIntentValidator.validate(obj['expirationIntent']))) {
            return false;
        }
        if ((typeof obj['originalTransactionId'] !== 'undefined') && !(typeof obj['originalTransactionId'] === "string" || obj['originalTransactionId'] instanceof String)) {
            return false;
        }
        if ((typeof obj['autoRenewProductId'] !== 'undefined') && !(typeof obj['autoRenewProductId'] === "string" || obj['autoRenewProductId'] instanceof String)) {
            return false;
        }
        if ((typeof obj['productId'] !== 'undefined') && !(typeof obj['productId'] === "string" || obj['productId'] instanceof String)) {
            return false;
        }
        if ((typeof obj['autoRenewStatus'] !== 'undefined') && !(JWSRenewalInfoDecodedPayloadValidator.autoRenewStatusValidator.validate(obj['autoRenewStatus']))) {
            return false;
        }
        if ((typeof obj['isInBillingRetryPeriod'] !== 'undefined') && !(typeof obj['isInBillingRetryPeriod'] === "boolean" || obj['isInBillingRetryPeriod'] instanceof Boolean)) {
            return false;
        }
        if ((typeof obj['priceIncreaseStatus'] !== 'undefined') && !(JWSRenewalInfoDecodedPayloadValidator.priceIncreaseStatusValidator.validate(obj['priceIncreaseStatus']))) {
            return false;
        }
        if ((typeof obj['gracePeriodExpiresDate'] !== 'undefined') && !(typeof obj['gracePeriodExpiresDate'] === "number")) {
            return false;
        }
        if ((typeof obj['offerType'] !== 'undefined') && !(JWSRenewalInfoDecodedPayloadValidator.offerTypeValidator.validate(obj['offerType']))) {
            return false;
        }
        if ((typeof obj['offerIdentifier'] !== 'undefined') && !(typeof obj['offerIdentifier'] === "string" || obj['offerIdentifier'] instanceof String)) {
            return false;
        }
        if ((typeof obj['signedDate'] !== 'undefined') && !(typeof obj['signedDate'] === "number")) {
            return false;
        }
        if ((typeof obj['environment'] !== 'undefined') && !(JWSRenewalInfoDecodedPayloadValidator.environmentValidator.validate(obj['environment']))) {
            return false;
        }
        if ((typeof obj['recentSubscriptionStartDate'] !== 'undefined') && !(typeof obj['recentSubscriptionStartDate'] === 'number')) {
            return false;
        }
        if ((typeof obj['renewalDate'] !== 'undefined') && !(typeof obj['renewalDate'] === 'number')) {
            return false;
        }
        if ((typeof obj['currency'] !== 'undefined') && !(typeof obj['currency'] === "string" || obj['currency'] instanceof String)) {
            return false;
        }
        if ((typeof obj['renewalPrice'] !== 'undefined') && !(typeof obj['renewalPrice'] === "number")) {
            return false;
        }
        if ((typeof obj['offerDiscountType'] !== 'undefined') && !(JWSRenewalInfoDecodedPayloadValidator.offerDiscountTypeValidator.validate(obj['offerDiscountType']))) {
            return false;
        }
        if (typeof obj['eligibleWinBackOfferIds'] !== 'undefined') {
            if (!Array.isArray(obj['eligibleWinBackOfferIds'])) {
                return false;
            }
            for (const eligibleWinBackOfferId of obj['eligibleWinBackOfferIds']) {
                if (!(typeof eligibleWinBackOfferId === "string" || eligibleWinBackOfferId instanceof String)) {
                    return false;
                }
            }
        }
        return true;
    }
}
exports.JWSRenewalInfoDecodedPayloadValidator = JWSRenewalInfoDecodedPayloadValidator;
JWSRenewalInfoDecodedPayloadValidator.environmentValidator = new Environment_1.EnvironmentValidator();
JWSRenewalInfoDecodedPayloadValidator.offerTypeValidator = new OfferType_1.OfferTypeValidator();
JWSRenewalInfoDecodedPayloadValidator.priceIncreaseStatusValidator = new PriceIncreaseStatus_1.PriceIncreaseStatusValidator();
JWSRenewalInfoDecodedPayloadValidator.autoRenewStatusValidator = new AutoRenewStatus_1.AutoRenewStatusValidator();
JWSRenewalInfoDecodedPayloadValidator.expirationIntentValidator = new ExpirationIntent_1.ExpirationIntentValidator();
JWSRenewalInfoDecodedPayloadValidator.offerDiscountTypeValidator = new OfferDiscountType_1.OfferDiscountTypeValidator();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSldTUmVuZXdhbEluZm9EZWNvZGVkUGF5bG9hZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL21vZGVscy9KV1NSZW5ld2FsSW5mb0RlY29kZWRQYXlsb2FkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSw0REFBNEQ7OztBQUU1RCx1REFBNkU7QUFFN0UsK0NBQWlFO0FBQ2pFLHlEQUFnRjtBQUNoRiwyREFBbUY7QUFDbkYsMkNBQTJEO0FBQzNELCtEQUF5RjtBQTBJekYsTUFBYSxxQ0FBcUM7SUFPOUMsUUFBUSxDQUFDLEdBQVE7UUFDYixJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsa0JBQWtCLENBQUMsS0FBSyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMscUNBQXFDLENBQUMseUJBQXlCLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1lBQzNKLE9BQU8sS0FBSyxDQUFBO1FBQ2hCLENBQUM7UUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsdUJBQXVCLENBQUMsS0FBSyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsdUJBQXVCLENBQUMsS0FBSyxRQUFRLElBQUksR0FBRyxDQUFDLHVCQUF1QixDQUFDLFlBQVksTUFBTSxDQUFDLEVBQUUsQ0FBQztZQUNqSyxPQUFPLEtBQUssQ0FBQTtRQUNoQixDQUFDO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLG9CQUFvQixDQUFDLEtBQUssV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLG9CQUFvQixDQUFDLEtBQUssUUFBUSxJQUFJLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDeEosT0FBTyxLQUFLLENBQUE7UUFDaEIsQ0FBQztRQUNELElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxXQUFX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aEIsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDO1FBQ0QsT0FBTyxJQUFJLENBQUE7SUFDZixDQUFDOztBQXRFTCxzRkF1RUM7QUF0RW1CLDBEQUFvQixHQUFHLElBQUksa0NBQW9CLEVBQUUsQ0FBQTtBQUNqRCx3REFBa0IsR0FBRyxJQUFJLDhCQUFrQixFQUFFLENBQUE7QUFDN0Msa0VBQTRCLEdBQUcsSUFBSSxrREFBNEIsRUFBRSxDQUFBO0FBQ2pFLDhEQUF3QixHQUFHLElBQUksMENBQXdCLEVBQUUsQ0FBQTtBQUN6RCwrREFBeUIsR0FBRyxJQUFJLDRDQUF5QixFQUFFLENBQUE7QUFDM0QsZ0VBQTBCLEdBQUcsSUFBSSw4Q0FBMEIsRUFBRSxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IChjKSAyMDIzIEFwcGxlIEluYy4gTGljZW5zZWQgdW5kZXIgTUlUIExpY2Vuc2UuXG5cbmltcG9ydCB7IEF1dG9SZW5ld1N0YXR1cywgQXV0b1JlbmV3U3RhdHVzVmFsaWRhdG9yIH0gZnJvbSBcIi4vQXV0b1JlbmV3U3RhdHVzXCJcbmltcG9ydCB7IERlY29kZWRTaWduZWREYXRhIH0gZnJvbSBcIi4vRGVjb2RlZFNpZ25lZERhdGFcIlxuaW1wb3J0IHsgRW52aXJvbm1lbnQsIEVudmlyb25tZW50VmFsaWRhdG9yIH0gZnJvbSBcIi4vRW52aXJvbm1lbnRcIlxuaW1wb3J0IHsgRXhwaXJhdGlvbkludGVudCwgRXhwaXJhdGlvbkludGVudFZhbGlkYXRvciB9IGZyb20gXCIuL0V4cGlyYXRpb25JbnRlbnRcIlxuaW1wb3J0IHsgT2ZmZXJEaXNjb3VudFR5cGUsIE9mZmVyRGlzY291bnRUeXBlVmFsaWRhdG9yIH0gZnJvbSBcIi4vT2ZmZXJEaXNjb3VudFR5cGVcIlxuaW1wb3J0IHsgT2ZmZXJUeXBlLCBPZmZlclR5cGVWYWxpZGF0b3IgfSBmcm9tIFwiLi9PZmZlclR5cGVcIlxuaW1wb3J0IHsgUHJpY2VJbmNyZWFzZVN0YXR1cywgUHJpY2VJbmNyZWFzZVN0YXR1c1ZhbGlkYXRvciB9IGZyb20gXCIuL1ByaWNlSW5jcmVhc2VTdGF0dXNcIlxuaW1wb3J0IHsgVmFsaWRhdG9yIH0gZnJvbSBcIi4vVmFsaWRhdG9yXCJcblxuLyoqXG4gKiBBIGRlY29kZWQgcGF5bG9hZCBjb250YWluaW5nIHN1YnNjcmlwdGlvbiByZW5ld2FsIGluZm9ybWF0aW9uIGZvciBhbiBhdXRvLXJlbmV3YWJsZSBzdWJzY3JpcHRpb24uXG4gKlxuICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9kb2N1bWVudGF0aW9uL2FwcHN0b3Jlc2VydmVyYXBpL2p3c3JlbmV3YWxpbmZvZGVjb2RlZHBheWxvYWQgSldTUmVuZXdhbEluZm9EZWNvZGVkUGF5bG9hZH1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBKV1NSZW5ld2FsSW5mb0RlY29kZWRQYXlsb2FkIGV4dGVuZHMgRGVjb2RlZFNpZ25lZERhdGEge1xuXG4gICAgLyoqXG4gICAgICogVGhlIHJlYXNvbiB0aGUgc3Vic2NyaXB0aW9uIGV4cGlyZWQuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvZXhwaXJhdGlvbmludGVudCBleHBpcmF0aW9uSW50ZW50fVxuICAgICAqKi9cbiAgICBleHBpcmF0aW9uSW50ZW50PzogRXhwaXJhdGlvbkludGVudCB8IG51bWJlclxuICAgICAgICBcbiAgICAvKipcbiAgICAgKiBUaGUgb3JpZ2luYWwgdHJhbnNhY3Rpb24gaWRlbnRpZmllciBvZiBhIHB1cmNoYXNlLlxuICAgICAqXG4gICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9kb2N1bWVudGF0aW9uL2FwcHN0b3Jlc2VydmVyYXBpL29yaWdpbmFsdHJhbnNhY3Rpb25pZCBvcmlnaW5hbFRyYW5zYWN0aW9uSWR9XG4gICAgICoqL1xuICAgIG9yaWdpbmFsVHJhbnNhY3Rpb25JZD86IHN0cmluZ1xuICAgICAgICBcbiAgICAvKipcbiAgICAgKiBUaGUgcHJvZHVjdCBpZGVudGlmaWVyIG9mIHRoZSBwcm9kdWN0IHRoYXQgd2lsbCByZW5ldyBhdCB0aGUgbmV4dCBiaWxsaW5nIHBlcmlvZC5cbiAgICAgKlxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vZG9jdW1lbnRhdGlvbi9hcHBzdG9yZXNlcnZlcmFwaS9hdXRvcmVuZXdwcm9kdWN0aWQgYXV0b1JlbmV3UHJvZHVjdElkfVxuICAgICAqKi9cbiAgICBhdXRvUmVuZXdQcm9kdWN0SWQ/OiBzdHJpbmdcbiAgICAgICAgXG4gICAgLyoqXG4gICAgICogVGhlIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgcHJvZHVjdCwgdGhhdCB5b3UgY3JlYXRlIGluIEFwcCBTdG9yZSBDb25uZWN0LlxuICAgICAqXG4gICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9kb2N1bWVudGF0aW9uL2FwcHN0b3Jlc2VydmVyYXBpL3Byb2R1Y3RpZCBwcm9kdWN0SWR9XG4gICAgICoqL1xuICAgIHByb2R1Y3RJZD86IHN0cmluZ1xuICAgICAgICBcbiAgICAvKipcbiAgICAgKiBUaGUgcmVuZXdhbCBzdGF0dXMgb2YgdGhlIGF1dG8tcmVuZXdhYmxlIHN1YnNjcmlwdGlvbi5cbiAgICAgKlxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vZG9jdW1lbnRhdGlvbi9hcHBzdG9yZXNlcnZlcmFwaS9hdXRvcmVuZXdzdGF0dXMgYXV0b1JlbmV3U3RhdHVzfVxuICAgICAqKi9cbiAgICBhdXRvUmVuZXdTdGF0dXM/OiBBdXRvUmVuZXdTdGF0dXMgfCBudW1iZXJcbiAgICAgICAgXG4gICAgLyoqXG4gICAgICogQSBCb29sZWFuIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIEFwcCBTdG9yZSBpcyBhdHRlbXB0aW5nIHRvIGF1dG9tYXRpY2FsbHkgcmVuZXcgYW4gZXhwaXJlZCBzdWJzY3JpcHRpb24uXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvaXNpbmJpbGxpbmdyZXRyeXBlcmlvZCBpc0luQmlsbGluZ1JldHJ5UGVyaW9kfVxuICAgICAqKi9cbiAgICBpc0luQmlsbGluZ1JldHJ5UGVyaW9kPzogYm9vbGVhblxuICAgICAgICBcbiAgICAvKipcbiAgICAgKiBUaGUgc3RhdHVzIHRoYXQgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGF1dG8tcmVuZXdhYmxlIHN1YnNjcmlwdGlvbiBpcyBzdWJqZWN0IHRvIGEgcHJpY2UgaW5jcmVhc2UuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvcHJpY2VpbmNyZWFzZXN0YXR1cyBwcmljZUluY3JlYXNlU3RhdHVzfVxuICAgICAqKi9cbiAgICBwcmljZUluY3JlYXNlU3RhdHVzPzogUHJpY2VJbmNyZWFzZVN0YXR1cyB8IG51bWJlclxuICAgICAgICBcbiAgICAvKipcbiAgICAgKiBUaGUgdGltZSB3aGVuIHRoZSBiaWxsaW5nIGdyYWNlIHBlcmlvZCBmb3Igc3Vic2NyaXB0aW9uIHJlbmV3YWxzIGV4cGlyZXMuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvZ3JhY2VwZXJpb2RleHBpcmVzZGF0ZSBncmFjZVBlcmlvZEV4cGlyZXNEYXRlfVxuICAgICAqKi9cbiAgICBncmFjZVBlcmlvZEV4cGlyZXNEYXRlPzogbnVtYmVyXG4gICAgICAgIFxuICAgIC8qKlxuICAgICAqIFRoZSB0eXBlIG9mIHRoZSBzdWJzY3JpcHRpb24gb2ZmZXIuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvb2ZmZXJ0eXBlIG9mZmVyVHlwZX1cbiAgICAgKiovXG4gICAgb2ZmZXJUeXBlPzogT2ZmZXJUeXBlIHwgbnVtYmVyXG4gICAgICAgIFxuICAgIC8qKlxuICAgICAqIFRoZSBpZGVudGlmaWVyIHRoYXQgY29udGFpbnMgdGhlIHByb21vIGNvZGUgb3IgdGhlIHByb21vdGlvbmFsIG9mZmVyIGlkZW50aWZpZXIuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvb2ZmZXJpZGVudGlmaWVyIG9mZmVySWRlbnRpZmllcn1cbiAgICAgKiovXG4gICAgb2ZmZXJJZGVudGlmaWVyPzogc3RyaW5nXG4gICAgICAgIFxuICAgIC8qKlxuICAgICAqIFRoZSBVTklYIHRpbWUsIGluIG1pbGxpc2Vjb25kcywgdGhhdCB0aGUgQXBwIFN0b3JlIHNpZ25lZCB0aGUgSlNPTiBXZWIgU2lnbmF0dXJlIGRhdGEuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvc2lnbmVkZGF0ZSBzaWduZWREYXRlfVxuICAgICAqKi9cbiAgICBzaWduZWREYXRlPzogbnVtYmVyXG4gICAgICAgIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXJ2ZXIgZW52aXJvbm1lbnQsIGVpdGhlciBzYW5kYm94IG9yIHByb2R1Y3Rpb24uXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvZW52aXJvbm1lbnQgZW52aXJvbm1lbnR9XG4gICAgICoqL1xuICAgIGVudmlyb25tZW50PzogRW52aXJvbm1lbnQgfCBzdHJpbmdcbiAgICAgICAgXG4gICAgLyoqXG4gICAgICogVGhlIGVhcmxpZXN0IHN0YXJ0IGRhdGUgb2YgYSBzdWJzY3JpcHRpb24gaW4gYSBzZXJpZXMgb2YgYXV0by1yZW5ld2FibGUgc3Vic2NyaXB0aW9uIHB1cmNoYXNlcyB0aGF0IGlnbm9yZXMgYWxsIGxhcHNlcyBvZiBwYWlkIHNlcnZpY2Ugc2hvcnRlciB0aGFuIDYwIGRheXMuXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvcmVjZW50c3Vic2NyaXB0aW9uc3RhcnRkYXRlIHJlY2VudFN1YnNjcmlwdGlvblN0YXJ0RGF0ZX1cbiAgICAgKiovXG4gICAgcmVjZW50U3Vic2NyaXB0aW9uU3RhcnREYXRlPzogbnVtYmVyXG4gICAgXG4gICAgLyoqXG4gICAgICogVGhlIFVOSVggdGltZSwgaW4gbWlsbGlzZWNvbmRzLCB3aGVuIHRoZSBtb3N0IHJlY2VudCBhdXRvLXJlbmV3YWJsZSBzdWJzY3JpcHRpb24gcHVyY2hhc2UgZXhwaXJlcy5cbiAgICAgKlxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vZG9jdW1lbnRhdGlvbi9hcHBzdG9yZXNlcnZlcmFwaS9yZW5ld2FsZGF0ZSByZW5ld2FsRGF0ZX1cbiAgICAgKiovXG4gICAgcmVuZXdhbERhdGU/OiBudW1iZXJcblxuICAgIC8qKlxuICAgICAqIFRoZSBjdXJyZW5jeSBjb2RlIGZvciB0aGUgcmVuZXdhbFByaWNlIG9mIHRoZSBzdWJzY3JpcHRpb24uXG4gICAgICpcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL2RvY3VtZW50YXRpb24vYXBwc3RvcmVzZXJ2ZXJhcGkvY3VycmVuY3kgY3VycmVuY3l9XG4gICAgICoqL1xuICAgIGN1cnJlbmN5Pzogc3RyaW5nXG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVuZXdhbCBwcmljZSwgaW4gbWlsbGl1bml0cywgb2YgdGhlIGF1dG8tcmVuZXdhYmxlIHN1YnNjcmlwdGlvbiB0aGF0IHJlbmV3cyBhdCB0aGUgbmV4dCBiaWxsaW5nIHBlcmlvZC5cbiAgICAgKlxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vZG9jdW1lbnRhdGlvbi9hcHBzdG9yZXNlcnZlcmFwaS9yZW5ld2FscHJpY2UgcmVuZXdhbFByaWNlfVxuICAgICAqKi9cbiAgICByZW5ld2FsUHJpY2U/OiBudW1iZXJcblxuICAgIC8qKlxuICAgICAqIFRoZSBwYXltZW50IG1vZGUgb2YgdGhlIGRpc2NvdW50IG9mZmVyLlxuICAgICAqXG4gICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFwcGxlLmNvbS9kb2N1bWVudGF0aW9uL2FwcHN0b3Jlc2VydmVyYXBpL29mZmVyZGlzY291bnR0eXBlIG9mZmVyRGlzY291bnRUeXBlfVxuICAgICAqKi9cbiAgICBvZmZlckRpc2NvdW50VHlwZT86IE9mZmVyRGlzY291bnRUeXBlIHwgc3RyaW5nXG5cbiAgICAvKipcbiAgICAgKiBBbiBhcnJheSBvZiB3aW4tYmFjayBvZmZlciBpZGVudGlmaWVycyB0aGF0IGEgY3VzdG9tZXIgaXMgZWxpZ2libGUgdG8gcmVkZWVtLCB3aGljaCBzb3J0cyB0aGUgaWRlbnRpZmllcnMgdG8gcHJlc2VudCB0aGUgYmV0dGVyIG9mZmVycyBmaXJzdC5cbiAgICAgKlxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vZG9jdW1lbnRhdGlvbi9hcHBzdG9yZXNlcnZlcmFwaS9lbGlnaWJsZXdpbmJhY2tvZmZlcmlkcyBlbGlnaWJsZVdpbkJhY2tPZmZlcklkc31cbiAgICAgKiovXG4gICAgZWxpZ2libGVXaW5CYWNrT2ZmZXJJZHM/OiBzdHJpbmdbXTtcbn1cblxuXG5leHBvcnQgY2xhc3MgSldTUmVuZXdhbEluZm9EZWNvZGVkUGF5bG9hZFZhbGlkYXRvciBpbXBsZW1lbnRzIFZhbGlkYXRvcjxKV1NSZW5ld2FsSW5mb0RlY29kZWRQYXlsb2FkPiB7XG4gICAgc3RhdGljIHJlYWRvbmx5IGVudmlyb25tZW50VmFsaWRhdG9yID0gbmV3IEVudmlyb25tZW50VmFsaWRhdG9yKClcbiAgICBzdGF0aWMgcmVhZG9ubHkgb2ZmZXJUeXBlVmFsaWRhdG9yID0gbmV3IE9mZmVyVHlwZVZhbGlkYXRvcigpXG4gICAgc3RhdGljIHJlYWRvbmx5IHByaWNlSW5jcmVhc2VTdGF0dXNWYWxpZGF0b3IgPSBuZXcgUHJpY2VJbmNyZWFzZVN0YXR1c1ZhbGlkYXRvcigpXG4gICAgc3RhdGljIHJlYWRvbmx5IGF1dG9SZW5ld1N0YXR1c1ZhbGlkYXRvciA9IG5ldyBBdXRvUmVuZXdTdGF0dXNWYWxpZGF0b3IoKVxuICAgIHN0YXRpYyByZWFkb25seSBleHBpcmF0aW9uSW50ZW50VmFsaWRhdG9yID0gbmV3IEV4cGlyYXRpb25JbnRlbnRWYWxpZGF0b3IoKVxuICAgIHN0YXRpYyByZWFkb25seSBvZmZlckRpc2NvdW50VHlwZVZhbGlkYXRvciA9IG5ldyBPZmZlckRpc2NvdW50VHlwZVZhbGlkYXRvcigpXG4gICAgdmFsaWRhdGUob2JqOiBhbnkpOiBvYmogaXMgSldTUmVuZXdhbEluZm9EZWNvZGVkUGF5bG9hZCB7XG4gICAgICAgIGlmICgodHlwZW9mIG9ialsnZXhwaXJhdGlvbkludGVudCddICE9PSAndW5kZWZpbmVkJykgJiYgIShKV1NSZW5ld2FsSW5mb0RlY29kZWRQYXlsb2FkVmFsaWRhdG9yLmV4cGlyYXRpb25JbnRlbnRWYWxpZGF0b3IudmFsaWRhdGUob2JqWydleHBpcmF0aW9uSW50ZW50J10pKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0eXBlb2Ygb2JqWydvcmlnaW5hbFRyYW5zYWN0aW9uSWQnXSAhPT0gJ3VuZGVmaW5lZCcpICYmICEodHlwZW9mIG9ialsnb3JpZ2luYWxUcmFuc2FjdGlvbklkJ10gPT09IFwic3RyaW5nXCIgfHwgb2JqWydvcmlnaW5hbFRyYW5zYWN0aW9uSWQnXSBpbnN0YW5jZW9mIFN0cmluZykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICgodHlwZW9mIG9ialsnYXV0b1JlbmV3UHJvZHVjdElkJ10gIT09ICd1bmRlZmluZWQnKSAmJiAhKHR5cGVvZiBvYmpbJ2F1dG9SZW5ld1Byb2R1Y3RJZCddID09PSBcInN0cmluZ1wiIHx8IG9ialsnYXV0b1JlbmV3UHJvZHVjdElkJ10gaW5zdGFuY2VvZiBTdHJpbmcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvYmpbJ3Byb2R1Y3RJZCddICE9PSAndW5kZWZpbmVkJykgJiYgISh0eXBlb2Ygb2JqWydwcm9kdWN0SWQnXSA9PT0gXCJzdHJpbmdcIiB8fCBvYmpbJ3Byb2R1Y3RJZCddIGluc3RhbmNlb2YgU3RyaW5nKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0eXBlb2Ygb2JqWydhdXRvUmVuZXdTdGF0dXMnXSAhPT0gJ3VuZGVmaW5lZCcpICYmICEoSldTUmVuZXdhbEluZm9EZWNvZGVkUGF5bG9hZFZhbGlkYXRvci5hdXRvUmVuZXdTdGF0dXNWYWxpZGF0b3IudmFsaWRhdGUob2JqWydhdXRvUmVuZXdTdGF0dXMnXSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvYmpbJ2lzSW5CaWxsaW5nUmV0cnlQZXJpb2QnXSAhPT0gJ3VuZGVmaW5lZCcpICYmICEodHlwZW9mIG9ialsnaXNJbkJpbGxpbmdSZXRyeVBlcmlvZCddID09PSBcImJvb2xlYW5cIiB8fCBvYmpbJ2lzSW5CaWxsaW5nUmV0cnlQZXJpb2QnXSBpbnN0YW5jZW9mIEJvb2xlYW4pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvYmpbJ3ByaWNlSW5jcmVhc2VTdGF0dXMnXSAhPT0gJ3VuZGVmaW5lZCcpICYmICEoSldTUmVuZXdhbEluZm9EZWNvZGVkUGF5bG9hZFZhbGlkYXRvci5wcmljZUluY3JlYXNlU3RhdHVzVmFsaWRhdG9yLnZhbGlkYXRlKG9ialsncHJpY2VJbmNyZWFzZVN0YXR1cyddKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICgodHlwZW9mIG9ialsnZ3JhY2VQZXJpb2RFeHBpcmVzRGF0ZSddICE9PSAndW5kZWZpbmVkJykgJiYgISh0eXBlb2Ygb2JqWydncmFjZVBlcmlvZEV4cGlyZXNEYXRlJ10gPT09IFwibnVtYmVyXCIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvYmpbJ29mZmVyVHlwZSddICE9PSAndW5kZWZpbmVkJykgJiYgIShKV1NSZW5ld2FsSW5mb0RlY29kZWRQYXlsb2FkVmFsaWRhdG9yLm9mZmVyVHlwZVZhbGlkYXRvci52YWxpZGF0ZShvYmpbJ29mZmVyVHlwZSddKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICgodHlwZW9mIG9ialsnb2ZmZXJJZGVudGlmaWVyJ10gIT09ICd1bmRlZmluZWQnKSAmJiAhKHR5cGVvZiBvYmpbJ29mZmVySWRlbnRpZmllciddID09PSBcInN0cmluZ1wiIHx8IG9ialsnb2ZmZXJJZGVudGlmaWVyJ10gaW5zdGFuY2VvZiBTdHJpbmcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvYmpbJ3NpZ25lZERhdGUnXSAhPT0gJ3VuZGVmaW5lZCcpICYmICEodHlwZW9mIG9ialsnc2lnbmVkRGF0ZSddID09PSBcIm51bWJlclwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0eXBlb2Ygb2JqWydlbnZpcm9ubWVudCddICE9PSAndW5kZWZpbmVkJykgJiYgIShKV1NSZW5ld2FsSW5mb0RlY29kZWRQYXlsb2FkVmFsaWRhdG9yLmVudmlyb25tZW50VmFsaWRhdG9yLnZhbGlkYXRlKG9ialsnZW52aXJvbm1lbnQnXSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvYmpbJ3JlY2VudFN1YnNjcmlwdGlvblN0YXJ0RGF0ZSddICE9PSAndW5kZWZpbmVkJykgJiYgISh0eXBlb2Ygb2JqWydyZWNlbnRTdWJzY3JpcHRpb25TdGFydERhdGUnXSA9PT0gJ251bWJlcicpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHR5cGVvZiBvYmpbJ3JlbmV3YWxEYXRlJ10gIT09ICd1bmRlZmluZWQnKSAmJiAhKHR5cGVvZiBvYmpbJ3JlbmV3YWxEYXRlJ10gPT09ICdudW1iZXInKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0eXBlb2Ygb2JqWydjdXJyZW5jeSddICE9PSAndW5kZWZpbmVkJykgJiYgISh0eXBlb2Ygb2JqWydjdXJyZW5jeSddID09PSBcInN0cmluZ1wiIHx8IG9ialsnY3VycmVuY3knXSBpbnN0YW5jZW9mIFN0cmluZykpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICgodHlwZW9mIG9ialsncmVuZXdhbFByaWNlJ10gIT09ICd1bmRlZmluZWQnKSAmJiAhKHR5cGVvZiBvYmpbJ3JlbmV3YWxQcmljZSddID09PSBcIm51bWJlclwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0eXBlb2Ygb2JqWydvZmZlckRpc2NvdW50VHlwZSddICE9PSAndW5kZWZpbmVkJykgJiYgIShKV1NSZW5ld2FsSW5mb0RlY29kZWRQYXlsb2FkVmFsaWRhdG9yLm9mZmVyRGlzY291bnRUeXBlVmFsaWRhdG9yLnZhbGlkYXRlKG9ialsnb2ZmZXJEaXNjb3VudFR5cGUnXSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG9ialsnZWxpZ2libGVXaW5CYWNrT2ZmZXJJZHMnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShvYmpbJ2VsaWdpYmxlV2luQmFja09mZmVySWRzJ10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVsaWdpYmxlV2luQmFja09mZmVySWQgb2Ygb2JqWydlbGlnaWJsZVdpbkJhY2tPZmZlcklkcyddKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGVsaWdpYmxlV2luQmFja09mZmVySWQgPT09IFwic3RyaW5nXCIgfHwgZWxpZ2libGVXaW5CYWNrT2ZmZXJJZCBpbnN0YW5jZW9mIFN0cmluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxufVxuIl19